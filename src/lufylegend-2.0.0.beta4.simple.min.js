var mouseX,mouseY,OS_PC="pc",OS_IPHONE="iPhone",OS_IPOD="iPod",OS_IPAD="iPad",OS_ANDROID="Android",OS_WINDOWS_PHONE="Windows Phone",OS_BLACK_BERRY="BlackBerry",NONE="none",UNDEFINED="undefined",LANDSCAPE="landscape",PORTRAIT="portrait";function LEvent(t){this.eventType=t,this._ll_preventDefault=!1}LEvent.prototype.preventDefault=function(){this._ll_preventDefault=!0},LEvent.INIT="init",LEvent.COMPLETE="complete",LEvent.ERROR="error",LEvent.PROGRESS="progress",LEvent.ENTER_FRAME="enter_frame",LEvent.WINDOW_RESIZE="resize",LEvent.WINDOW_ORIENTATIONCHANGE="orientationchange",LEvent.SOUND_COMPLETE="sound_complete",LEvent.END_CONTACT="endContact",LEvent.PRE_SOLVE="preSolve",LEvent.POST_SOLVE="postSolve",LEvent.BEGIN_CONTACT="beginContact",LEvent.addEventListener=function(t,e,n,a){null==a&&(a=!1),t.addEventListener?t.addEventListener(e,n,a):t.attachEvent&&(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n]()},t.attachEvent("on"+e,t[e+n]))},LEvent.removeEventListener=function(t,e,n,a){null==a&&(a=!1),t.removeEventListener?t.removeEventListener(e,n,a):t.detachEvent&&(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n]()},t.detachEvent("on"+e,t[e+n]))};var LMouseEvent=function(){throw"LMouseEvent cannot be instantiated"};LMouseEvent.MOUSE_DOWN="mousedown",LMouseEvent.MOUSE_UP="mouseup",LMouseEvent.TOUCH_START="touchstart",LMouseEvent.TOUCH_MOVE="touchmove",LMouseEvent.TOUCH_END="touchend",LMouseEvent.MOUSE_MOVE="mousemove",LMouseEvent.MOUSE_OVER="mouseover",LMouseEvent.MOUSE_OUT="mouseout",LMouseEvent.DOUBLE_CLICK="dblclick";var LMultitouchInputMode=function(){throw"LMultitouchInputMode cannot be instantiated"};LMultitouchInputMode.NONE="none",LMultitouchInputMode.GESTURE="gesture",LMultitouchInputMode.TOUCH_POINT="touchPoint";var LMultitouch=function(){throw"LMultitouch cannot be instantiated"};LMultitouch.inputMode="none",LMultitouch.touchs=[];var LTimerEvent=function(){throw"LTimerEvent cannot be instantiated"};LTimerEvent.TIMER="timer",LTimerEvent.TIMER_COMPLETE="timerComplete";var LTextEvent=function(){throw"LTextEvent cannot be instantiated"};LTextEvent.TEXT_INPUT="textInput",LTextEvent.WIND_COMPLETE="windComplete";var LFocusEvent=function(){throw"LFocusEvent cannot be instantiated"};LFocusEvent.FOCUS_IN="focusIn",LFocusEvent.FOCUS_OUT="focusOut";var LMouseEventContainer=function(){function t(){var t=this;t.container={},t.dispatchAllEvent=!1,t.mouseDownContainer=[],t.mouseUpContainer=[],t.mouseMoveContainer=[],t.mouseOverContainer=[],t.mouseOutContainer=[],t.mouseDblContainer=[],t.textFieldInputContainer=[],t.buttonContainer=[]}t.prototype={pushInputBox:function(t){var e,n,a=this.textFieldInputContainer;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex)return;this.textFieldInputContainer.push(t)},removeInputBox:function(t){var e,n,a=this.textFieldInputContainer;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex){this.textFieldInputContainer.splice(e,1);break}},pushButton:function(t){var e,n,a=this.buttonContainer;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex)return;this.buttonContainer.push(t)},removeButton:function(t){var e,n,a=this.buttonContainer;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex){this.buttonContainer.splice(e,1);break}},dispatchEventButton:function(t){var e,n,a=this;for(e=0,n=a.buttonContainer.length;e<n;e++)"function"==typeof a.buttonContainer[e].ll_button_mode&&a.buttonContainer[e].ll_button_mode(t)},addEvent:function(t,e,n,a){e.push({container:t,listener:n,_this:a})},removeEvent:function(t,e,n,a){var i,o;for(i=0,o=e.length;i<o;i++)if(!(e[i].container.objectIndex!==t.objectIndex||n&&e[i].listener!=n||a&&e[i]._this&&e[i]._this.objectIndex!=a.objectIndex)){e.splice(i,1);break}},addMouseDownEvent:function(t,e,n){this.addEvent(t,this.mouseDownContainer,e,n)},addMouseUpEvent:function(t,e,n){this.addEvent(t,this.mouseUpContainer,e,n)},addMouseMoveEvent:function(t,e,n){this.addEvent(t,this.mouseMoveContainer,e,n)},addMouseOverEvent:function(t,e,n){this.addEvent(t,this.mouseOverContainer,e,n)},addMouseOutEvent:function(t,e,n){this.addEvent(t,this.mouseOutContainer,e,n)},addMouseDblEvent:function(t,e,n){this.addEvent(t,this.mouseDblContainer,e,n)},addMouseEvent:function(t,e,n,a){var i=this;e===LMouseEvent.MOUSE_DOWN?i.addMouseDownEvent(t,n,a):e===LMouseEvent.MOUSE_UP?i.addMouseUpEvent(t,n,a):e===LMouseEvent.MOUSE_OVER?i.addMouseOverEvent(t,n,a):e===LMouseEvent.MOUSE_OUT?i.addMouseOutEvent(t,n,a):e===LMouseEvent.MOUSE_MOVE?i.addMouseMoveEvent(t,n,a):i.addMouseDblEvent(t,n,a)},hasEventListener:function(t,e,n){for(var a,i=this,o=0,r=(a=e==LMouseEvent.MOUSE_DOWN?i.mouseDownContainer:e==LMouseEvent.MOUSE_UP?i.mouseUpContainer:e==LMouseEvent.MOUSE_OVER?i.mouseOverContainer:e==LMouseEvent.MOUSE_OUT?i.mouseOutContainer:e==LMouseEvent.MOUSE_MOVE?i.mouseMoveContainer:i.mouseDblContainer).length;o<r;o++)if(a[o].container.objectIndex===t.objectIndex&&(!n||a[o].listener==n))return!0;return!1},removeMouseDownEvent:function(t,e,n){this.removeEvent(t,this.mouseDownContainer,e,n)},removeMouseUpEvent:function(t,e,n){this.removeEvent(t,this.mouseUpContainer,e,n)},removeMouseMoveEvent:function(t,e,n){this.removeEvent(t,this.mouseMoveContainer,e,n)},removeMouseOverEvent:function(t,e,n){this.removeEvent(t,this.mouseOverContainer,e,n)},removeMouseOutEvent:function(t,e,n){this.removeEvent(t,this.mouseOutContainer,e,n)},removeMouseDblEvent:function(t,e,n){this.removeEvent(t,this.mouseDblContainer,e,n)},removeMouseEvent:function(t,e,n,a){var i=this;e==LMouseEvent.MOUSE_DOWN?i.removeMouseDownEvent(t,n,a):e==LMouseEvent.MOUSE_UP?i.removeMouseUpEvent(t,n,a):e==LMouseEvent.MOUSE_OVER?i.removeMouseOverEvent(t,n,a):e==LMouseEvent.MOUSE_OUT?i.removeMouseOutEvent(t,n,a):e==LMouseEvent.MOUSE_MOVE?i.removeMouseMoveEvent(t,n,a):i.removeMouseDblEvent(t,n,a)},dispatchMouseEvent:function(t,e){var n=this;e==LMouseEvent.MOUSE_DOWN?(n.dispatchEvent(t,n.mouseDownContainer,LMouseEvent.MOUSE_DOWN),n.dispatchEvent(t,n.textFieldInputContainer)):e==LMouseEvent.MOUSE_UP?n.dispatchEvent(t,n.mouseUpContainer,LMouseEvent.MOUSE_UP):e==LMouseEvent.DOUBLE_CLICK?n.dispatchEvent(t,n.mouseDblContainer,LMouseEvent.DOUBLE_CLICK):(n.dispatchEventButton(t),n.dispatchEvent(t,n.mouseOutContainer,LMouseEvent.MOUSE_OUT),n.dispatchEvent(t,n.mouseOverContainer,LMouseEvent.MOUSE_OVER),n.dispatchEvent(t,n.mouseMoveContainer,LMouseEvent.MOUSE_MOVE))},getRootParams:function(t){for(var e=t.parent,n={x:0,y:0,scaleX:1,scaleY:1};e&&"root"!=e;)n.x*=e.scaleX,n.y*=e.scaleY,n.x+=e.x,n.y+=e.y,n.scaleX*=e.scaleX,n.scaleY*=e.scaleY,e=e.parent;return n},_mouseEnabled:function(t){if(!t||!t.parent)return!1;if(!t.visible||typeof t.mouseEnabled!=UNDEFINED&&!t.mouseEnabled)return!1;for(var e=t.parent;e&&"root"!=e;){if(!e.mouseEnabled||!e.mouseChildren||!e.visible)return!1;if(!(e=e.parent))return!1}return!0},_dispatchEvent:function(t,e,n,a,i,o){var r,s,l=n.length;for(r=i;r<=o&&r<l;r++)(s=n[r]).sp.objectIndex==a&&(t.currentTarget=t.clickTarget=s.sp,t.target||(t.target=s.sp),t.event_type=e,t.selfX=(t.offsetX-s.co.x-s.sp.x)/(s.co.scaleX*s.sp.scaleX),t.selfY=(t.offsetY-s.co.y-s.sp.y)/(s.co.scaleY*s.sp.scaleY),s.listener.call(s._this?s._this:s,t,s.sp))},dispatchEvent:function(t,e,n){var a,i,o,r,s,l=this,u=[];for(r=0,s=e.length;r<s;r++)if(a=e[r].container||e[r],l._mouseEnabled(a))if(i=l.getRootParams(a),n||!a.mouseEvent)if(a.ismouseon(t,i)){if(n==LMouseEvent.MOUSE_OUT)continue;if(n==LMouseEvent.MOUSE_OVER&&a.ll_mousein)continue;n!=LMouseEvent.MOUSE_UP&&(a.ll_mousein=!0),u.push({sp:a,co:i,listener:e[r].listener,_this:e[r]._this})}else{if(n!=LMouseEvent.MOUSE_OUT&&n!=LMouseEvent.MOUSE_OVER)continue;if(!a.ll_mousein)continue;a.ll_mousein=!1,u.push({sp:a,co:i,listener:e[r].listener,_this:e[r]._this})}else a.mouseEvent(t,LMouseEvent.MOUSE_DOWN,i);if(0!=u.length)for(1<u.length&&(u=u.sort(l._sort.bind(l))),s=u.length,r=0;r<s;r++)if(o=u[r],l._dispatchEvent(t,n,u,o.sp.objectIndex,r,l.dispatchAllEvent?s-1:r),r<u.length-1&&o.sp.objectIndex==u[r+1].sp.objectIndex)u.splice(r,1),r--;else{for(var c;c||(c=o.sp.parent,t.target=o.sp),c&&"root"!=c&&(l._dispatchEvent(t,n,u,c.objectIndex,r+1,s),(c=(t.target=c).parent)&&"root"!=c););if(!l.dispatchAllEvent)break}},set:function(t,e){this.container[t]=e},_sort:function(t,e){var n,a,i,o,r,s=this._getSort(t.sp),l=this._getSort(e.sp);for(i=0,o=s.length,r=l.length;i<o&&i<r;i++)if(n=s[i],a=l[i],n.objectIndex!=a.objectIndex)return a.parent.getChildIndex(a)-n.parent.getChildIndex(n);return l.length-s.length},_getSort:function(t){for(var e=t.parent,n=[t];e&&"root"!=e;)n.unshift(e),e=e.parent;return n}};var e=new t;return e.set(LMouseEvent.MOUSE_DOWN,!0),e.set(LMouseEvent.MOUSE_UP,!0),e.set(LMouseEvent.MOUSE_MOVE,!0),e}(),LKeyboardEvent=function(){throw"LKeyboardEvent cannot be instantiated"};LKeyboardEvent.KEY_DOWN="keydown",LKeyboardEvent.KEY_UP="keyup",LKeyboardEvent.KEY_PRESS="keypress";var LAccelerometerEvent=function(){throw"LAccelerometerEvent cannot be instantiated"};function LStageAlign(){throw"LStageAlign cannot be instantiated"}function LStageScaleMode(){throw"LStageScaleMode cannot be instantiated"}LAccelerometerEvent.DEVICEMOTION="devicemotion",LStageAlign.TOP="T",LStageAlign.BOTTOM="B",LStageAlign.LEFT="L",LStageAlign.RIGHT="Re",LStageAlign.TOP_LEFT="TL",LStageAlign.TOP_RIGHT="TR",LStageAlign.TOP_MIDDLE="TM",LStageAlign.BOTTOM_LEFT="BL",LStageAlign.BOTTOM_RIGHT="BR",LStageAlign.BOTTOM_MIDDLE="BM",LStageAlign.MIDDLE="M",LStageScaleMode.EXACT_FIT="exactFit",LStageScaleMode.SHOW_ALL="showAll",LStageScaleMode.NO_BORDER="noBorder",LStageScaleMode.NO_SCALE="noScale";var LGlobal=function(){function g(){throw"LGlobal cannot be instantiated"}return g.FULL_SCREEN="full_screen",g.traceDebug=!1,g.displayState=NONE,g.aspectRatio=NONE,g.canvasObj=null,g.canvas=null,g.webAudio=!0,g.objectIndex=1,g.stage=null,g.width=0,g.height=0,g.box2d=null,g.speed=50,g.IS_MOUSE_DOWN=!1,g.stopPropagation=!1,g.preventDefault=!0,g.childList=new Array,g.dragList=new Array,g.excludingContainer=new Array,g.fpsStatus=null,g.stageScale="noScale",g.align="M",g.mobile=!1,g.canTouch=!1,g.wx=!1,g.os=OS_PC,g.ios=!1,g.android=!1,g.android_new=!1,g.backgroundColor=null,g.destroy=!0,g.forceRefresh=!1,g.devicePixelRatio=window.devicePixelRatio||1,g.startTimer=0,g.keepClear=!0,g.top=0,g.left=0,g.enableWebGL=typeof enableWebGLCanvas!==UNDEFINED,g.window=window,function(t){if("undefined"!=typeof wx&&"undefined"!=typeof GameGlobal&&(g.wx=!0),g.isOldFirefox=function(t){var e=t.toLowerCase().indexOf("firefox");if(e<0)return!1;var n=t.substring(e+8,t.length);return parseFloat(n)<39}(t),0<t.indexOf(OS_IPHONE))g.os=OS_IPHONE,g.canTouch=!0,g.ios=!0;else if(0<t.indexOf(OS_IPOD))g.os=OS_IPOD,g.canTouch=!0,g.ios=!0;else if(0<t.indexOf(OS_IPAD))g.os=OS_IPAD,g.ios=!0,g.canTouch=!0;else if(0<t.indexOf(OS_ANDROID)){g.os=OS_ANDROID,g.canTouch=!0,g.android=!0;var e=t.indexOf(OS_ANDROID);3<parseInt(t.substr(e+8,1))&&(g.android_new=!0)}else 0<t.indexOf(OS_WINDOWS_PHONE)?(g.os=OS_WINDOWS_PHONE,g.canTouch=!0):0<t.indexOf(OS_BLACK_BERRY)&&(g.os=OS_BLACK_BERRY,g.canTouch=!0);if(g.ios){var n=t.match(/OS\s(\d+)_(\d+)_?(\d+)?/);g.iOSversion=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3]||0,10)]}g.mobile=g.canTouch}(navigator.userAgent),g.setDebug=function(t){g.traceDebug=t},g.setCanvas=function(t,e,n){g.ll_createCanvas(t,e,n),g.ll_createStage(),g.displayState==LStage.FULL_SCREEN?g.resize():"number"==typeof g.displayState&&g.resize(g.canvasObj.width*g.displayState,g.canvasObj.height*g.displayState),g.canTouch?(g.ll_clicks=0,g.ll_prev_clickTime=0,LEvent.addEventListener(g.canvasObj,LMouseEvent.TOUCH_START,g.ll_touchStart),LEvent.addEventListener(document,LMouseEvent.TOUCH_END,g.ll_touchEnd),LEvent.addEventListener(g.canvasObj,LMouseEvent.TOUCH_MOVE,g.ll_touchMove)):(LEvent.addEventListener(g.canvasObj,LMouseEvent.DOUBLE_CLICK,g.ll_mouseDbclick),LEvent.addEventListener(g.canvasObj,LMouseEvent.MOUSE_DOWN,g.ll_mouseDown),LEvent.addEventListener(g.canvasObj,LMouseEvent.MOUSE_MOVE,g.ll_mouseMove),LEvent.addEventListener(g.canvasObj,LMouseEvent.MOUSE_UP,g.ll_mouseUp),LEvent.addEventListener(g.canvasObj,LMouseEvent.MOUSE_OUT,g.ll_mouseOut))},g.ll_createCanvas=function(t,e,n){g.id=t,g.wx?(g.canvasObj=document.getElementsByTagName("canvas")[0],g.object={style:{left:0,top:0}},g.canvasObj.style={marginLeft:0,marginTop:0}):((g.object=document.getElementById(t)).innerHTML='<div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform: translateZ(0);z-index:0;"><canvas id="'+g.id+'_canvas" style="margin:0;padding:0;width:'+e+"px;height:"+n+'px;"><div id="noCanvas"><p>Hey there, it looks like you\'re using Microsoft\'s Internet Explorer. Microsoft hates the Web and doesn\'t support HTML5 :(</p></div></canvas></div><div id="'+g.id+'_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="'+g.id+'_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="'+g.id+'_InputTextBox"  style="background:transparent;border:0px;" /><input type="password" id="'+g.id+'_passwordBox"  style="background:transparent;border:0px;" /></div>',g.canvasObj=document.getElementById(g.id+"_canvas"),g.inputBox=document.getElementById(g.id+"_InputText"),g.inputTextareaBoxObj=document.getElementById(g.id+"_InputTextareaBox"),g.inputTextBoxObj=document.getElementById(g.id+"_InputTextBox"),g.passwordBoxObj=document.getElementById(g.id+"_passwordBox")),g._canvas=document.createElement("canvas"),(g._context=g._canvas.getContext("2d"))&&(g.canvasObj.innerHTML=""),g.inputTextField=null,g.wx&&(g._content_width=e,g._content_height=n,g.canvasObj.width/g.canvasObj.height>e/n?e=g.canvasObj.width*n/g.canvasObj.height:n=g.canvasObj.height*e/g.canvasObj.width),g.canvasObj.width=e,g.canvasObj.height=n,g.width=g._content_width||e,g.height=g._content_height||n,g.canvasStyleWidth=g.canvasObj.width,g.canvasStyleHeight=g.canvasObj.height,g.canvas=g.enableWebGL&&"function"==typeof enableWebGLCanvas?enableWebGLCanvas(g.canvasObj):g.canvasObj.getContext("2d"),g.offsetX=mouseX=0,g.offsetY=mouseY=0},g.ll_createStage=function(){(g.stage=new LSprite).parent="root",g.childList.push(g.stage),g.wx&&(g.stageMask=new LSprite,g.childList.push(g.stageMask)),g.stage.baseAddEvent=g.stage.addEventListener,g.stage.baseRemoveEvent=g.stage.removeEventListener,g.stage.addEventListener=function(t,e){t==LEvent.WINDOW_RESIZE||t==LEvent.WINDOW_ORIENTATIONCHANGE?(t==LEvent.WINDOW_RESIZE?g.stage.onresizeListener=e:g.stage.onorientationchangeListener=e,g.stage.onresize||(g.stage.onresize=function(t){g.stage.onresizeEvent=t},LEvent.addEventListener(g.window,t,g.stage.onresize))):t==LKeyboardEvent.KEY_DOWN||t==LKeyboardEvent.KEY_UP||t==LKeyboardEvent.KEY_PRESS?LEvent.addEventListener(g.window,t,e):g.stage.baseAddEvent(t,e)},g.stage.removeEventListener=function(t,e){if(t==LEvent.WINDOW_RESIZE||t==LEvent.WINDOW_ORIENTATIONCHANGE){if(t==LEvent.WINDOW_RESIZE){if(delete g.stage.onresizeListener,g.stage.onorientationchangeListener)return}else if(delete g.stage.onorientationchangeListener,g.stage.onresizeListener)return;LEvent.removeEventListener(g.window,LEvent.WINDOW_RESIZE,g.stage.onresize),delete g.stage.onresize}else t==LKeyboardEvent.KEY_DOWN||t==LKeyboardEvent.KEY_UP||t==LKeyboardEvent.KEY_PRESS?LEvent.removeEventListener(g.window,t,e):g.stage.baseRemoveEvent(t,e)},g.innerWidth=window.innerWidth,g.innerHeight=window.innerHeight,LEvent.addEventListener(g.window,"blur",function(){g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))})},g.ll_touchStart=function(t){var e,n,a;if(g._outStageCheckCount=1,g.IS_MOUSE_DOWN=!0,g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN)),g.inputTextField&&g.inputTextField._ll_getValue(),e=parseInt(0+g.object.style.left)+parseInt(g.canvasObj.style.marginLeft),n=parseInt(0+g.object.style.top)+parseInt(g.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE)a=g.ll_touchStartEvent(t,0,e,n);else if(LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(var i=0,o=t.touches.length;i<o;i++)LMultitouch.touchs["touch"+t.touches[i].identifier]||(a=g.ll_touchStartEvent(t,i,e,n));var r=(new Date).getTime();g.ll_clicks=r<=g.ll_prev_clickTime+500?g.ll_clicks+1:1,g.ll_prev_clickTime=r,2===g.ll_clicks&&(g.mouseEvent(a,LMouseEvent.DOUBLE_CLICK),g.ll_clicks=0),g.mouseJoint_start&&g.mouseJoint_start(a),g.touchHandler(t),LSound.startLoad()},g.ll_touchStartEvent=function(t,e,n,a){var i={offsetX:t.touches[e].pageX-n,offsetY:t.touches[e].pageY-a,touchPointID:t.touches[e].identifier,force:t.touches[e].force,rotationAngle:t.touches[e].rotationAngle,radiusX:t.touches[e].radiusX,radiusY:t.touches[e].radiusY};return i.offsetX=g.ll_scaleX(i.offsetX),i.offsetY=g.ll_scaleY(i.offsetY),mouseX=g.offsetX=i.offsetX,mouseY=g.offsetY=i.offsetY,LMultitouch.touchs["touch"+i.touchPointID]=i,g.mouseEvent(i,LMouseEvent.MOUSE_DOWN),g.buttonStatusEvent=i},g.ll_touchEnd=function(t){var e,n,a,i,o,r;if(g.IS_MOUSE_DOWN=!1,LMultitouch.inputMode==LMultitouchInputMode.TOUCH_POINT)for(a in LMultitouch.touchs){for(e=LMultitouch.touchs[a],r=!1,i=0,o=t.touches.length;i<o;i++)if(t.touches[i].identifier==e.touchPointID){r=!0;break}r||(n=e,delete LMultitouch.touchs[a],g.mouseEvent(n,LMouseEvent.MOUSE_UP))}n||g.mouseEvent(n={offsetX:g.offsetX,offsetY:g.offsetY},LMouseEvent.MOUSE_UP),g.touchHandler(t),g.buttonStatusEvent=null,g.mouseJoint_end&&g.mouseJoint_end(),g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))},g.ll_touchMove=function(t){var e,n,a,i=t.touches.length;e=parseInt(0+g.object.style.left)+parseInt(g.canvasObj.style.marginLeft),n=parseInt(0+g.object.style.top)+parseInt(g.canvasObj.style.marginTop),LMultitouch.inputMode==LMultitouchInputMode.NONE&&(i=1);for(var o=0,r=t.touches.length;o<r&&o<i;o++)(a={offsetX:t.touches[o].pageX-e,offsetY:t.touches[o].pageY-n,touchPointID:t.touches[o].identifier}).offsetX=g.ll_scaleX(a.offsetX),a.offsetY=g.ll_scaleY(a.offsetY),mouseX=g.offsetX=a.offsetX,mouseY=g.offsetY=a.offsetY,LMultitouch.touchs["touch"+a.touchPointID]&&LMultitouch.touchs["touch"+a.touchPointID].offsetX==a.offsetX&&LMultitouch.touchs["touch"+a.touchPointID].offsetY==a.offsetY||(g.buttonStatusEvent=a,(LMultitouch.touchs["touch"+a.touchPointID]=a).offsetX<=0||a.offsetX>=g.innerWidth||a.offsetX>=g.canvasObj.width||a.offsetY<=0||a.offsetY>=g.innerHeight||a.offsetY>=g.canvasObj.height?g._outStageCheckCount=0:g._outStageCheckCount=1,g.mouseEvent(a,LMouseEvent.MOUSE_MOVE));g.touchHandler(t),g.mouseJoint_move&&g.mouseJoint_move(a)},g.ll_mouseDbclick=function(t){null==t.offsetX&&null!=t.layerX&&(t.offsetX=t.layerX,t.offsetY=t.layerY);var e={button:t.button};e.offsetX=g.ll_scaleX(t.offsetX),e.offsetY=g.ll_scaleY(t.offsetY),g.mouseEvent(e,LMouseEvent.DOUBLE_CLICK)},g.ll_mouseDown=function(t){null==t.offsetX&&null!=t.layerX&&(t.offsetX=t.layerX,t.offsetY=t.layerY),g.inputTextField&&g.inputTextField._ll_getValue();var e={button:t.button};e.offsetX=g.ll_scaleX(t.offsetX),e.offsetY=g.ll_scaleY(t.offsetY),g.mouseEvent(e,LMouseEvent.MOUSE_DOWN),g.IS_MOUSE_DOWN=!0,g.mouseJoint_start&&g.mouseJoint_start(e),LSound.startLoad()},g.ll_mouseMove=function(t){null==t.offsetX&&null!=t.layerX&&(t.offsetX=t.layerX,t.offsetY=t.layerY);var e={};e.offsetX=g.ll_scaleX(t.offsetX),e.offsetY=g.ll_scaleY(t.offsetY),g.buttonStatusEvent=e,mouseX=g.offsetX=e.offsetX,mouseY=g.offsetY=e.offsetY,g.cursor="default",mouseX<=0||g.innerWidth<=mouseX||mouseX>=g.canvasObj.width||mouseY<=0||g.innerHeight<=mouseY||mouseY>=g.canvasObj.height?g._outStageCheckCount&&(g._outStageCheckCount=0,g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT))):g._outStageCheckCount||(g._outStageCheckCount=1,g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_IN))),g.mouseEvent(e,LMouseEvent.MOUSE_MOVE),document.body.style.cursor=g.cursor,g.mouseJoint_move&&g.mouseJoint_move(e)},g.ll_mouseUp=function(t){null==t.offsetX&&null!=t.layerX&&(t.offsetX=t.layerX,t.offsetY=t.layerY);var e={button:t.button};e.offsetX=g.ll_scaleX(t.offsetX),e.offsetY=g.ll_scaleY(t.offsetY),g.mouseEvent(e,LMouseEvent.MOUSE_UP),g.IS_MOUSE_DOWN=!1,g.mouseJoint_end&&g.mouseJoint_end()},g.ll_mouseOut=function(t){null==t.offsetX&&null!=t.layerX&&(t.offsetX=t.layerX,t.offsetY=t.layerY);var e={};e.offsetX=g.ll_scaleX(t.offsetX),e.offsetY=g.ll_scaleY(t.offsetY),g.mouseEvent(e,LMouseEvent.MOUSE_OUT),g.IS_MOUSE_DOWN=!1},g.touchHandler=function(t){return g.stopPropagation&&(t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation()),g.preventDefault&&t.preventDefault(),t},g.mouseEvent=function(t,e){if(e==LMouseEvent.MOUSE_MOVE&&g.dragHandler(t),LMouseEventContainer.container[e])LMouseEventContainer.dispatchMouseEvent(t,e);else for(var n=g.childList.length-1;0<=n&&(!g.childList[n].mouseEvent||!g.childList[n].mouseEvent(t,e));n--);},g.dragHandler=function(t){var e,n,a,i=g.dragList;for(e=i.length-1;0<=e;e--)if(n=i[e],!g.canTouch||n.ll_touchPointID==t.touchPointID){a=n.parent.globalToLocal(new LPoint(t.offsetX-n.ll_dragMX+n.ll_dragGlobalPoint.x,t.offsetY-n.ll_dragMY+n.ll_dragGlobalPoint.y)),n.x=a.x,n.y=a.y,n.dragRange&&(n.x<n.dragRange.left?n.x=n.dragRange.left:n.x>n.dragRange.right&&(n.x=n.dragRange.right),n.y<n.dragRange.top?n.y=n.dragRange.top:n.y>n.dragRange.bottom&&(n.y=n.dragRange.bottom));break}},g._ll_mobile=function(){var t,e,n,a,i,o,r=1.5*(e=.3*g.canvasObj.width),s=.05*g.canvasObj.width,l=.05*e,u=.15*e,c=.3*e,h=.2*r,d="#cccccc",p="#000000",f="#ffffff",v="#ff0000";addChild(t=new LSprite),r=1.5*(e=.3*g.canvasObj.width),t.graphics.drawRoundRect(1,p,[s,s,e,r,s],!0,d),t.graphics.drawRoundRect(1,p,[s+l,s+l,e-2*l,r-2*l,s],!0,p),t.graphics.drawRect(1,f,[s+u,s+h,e-2*u,r-2*h],!0,f),t.graphics.drawArc(1,f,[s+.5*e,s+r-3.5*l,1.5*l,0,2*Math.PI]),t.graphics.drawRoundRect(1,f,[s+c,s+u,e-2*c,l,.5*l]),(n=new LSprite).x=.5*-(e-2*u),n.y=.5*-l,n.graphics.drawRect(1,v,[0,0,e-2*u,l],!0,v),(a=new LSprite).y=.5*-(e-2*u),a.x=.5*-l,a.graphics.drawRect(1,v,[0,0,l,e-2*u],!0,v),(i=new LSprite).x=s+c+.5*(e-2*c),i.y=s+h+.5*(r-2*h),i.rotate=45,i.addChild(n),i.addChild(a),t.addChild(i),(o=new LSprite).graphics.drawVertices(2,p,[[0,0],[u,u],[0,2*u]],!0,d),o.x=1.5*s+r,o.y=1.5*s+.5*r,addChild(o),t.arrow=o;return window.onorientationchange=function(){setTimeout(function(){location.href=location.href},100)},t},g.verticalError=function(){var t=.3*g.canvasObj.width,e=.05*g.canvasObj.width,n=g._ll_mobile(),a=n.clone();a.getChildAt(0).visible=!1,a.x=.5*g.canvasObj.width+e,addChild(a),n.rotate=90,n.x=.5*g.canvasObj.width+e,n.y=.5*t},g.horizontalError=function(){var t=.3*g.canvasObj.width,e=.05*g.canvasObj.width,n=g._ll_mobile(),a=n.clone();a.getChildAt(0).visible=!1,a.rotate=90,a.x=g.canvasObj.width-e,a.y=.5*t,addChild(a),n.arrow.x=1.5*e+t},g.onShow=function(){null!=g.canvas&&(g.enableWebGL&&(g.canvas.start2D(),g.canvas.globalAlpha=1),g._outStageCheckCount<=0&&--g._outStageCheckCount<-2&&(g.stage.dispatchEvent(new LEvent(LFocusEvent.FOCUS_OUT)),g._outStageCheckCount=1),g.fpsStatus&&g.fpsStatus.reset(),g.stage.onresizeEvent&&(g.stage.onresizeListener&&g.stage.onresizeListener(g.stage.onresizeEvent),g.stage.onorientationchangeListener&&g.stage.onorientationchangeListener({orientation:window.innerWidth>window.innerHeight?LANDSCAPE:PORTRAIT}),delete g.stage.onresizeEvent),g.forceRefresh&&(g.canvasObj.width=g.canvasObj.width,g.forceRefresh=!1),g.canvas.beginPath(),null!=g.box2d?(g.box2d.ll_show(),!g.traceDebug&&g.keepClear&&g.canvas.clearRect(0,0,g.canvasObj.width+1,g.canvasObj.height+1)):(g.keepClear&&g.canvas.clearRect(0,0,g.canvasObj.width+1,g.canvasObj.height+1),null!==g.backgroundColor&&(g.canvas.fillStyle=g.backgroundColor,g.canvas.fillRect(0,0,g.canvasObj.width,g.canvasObj.height))),g.show(g.childList,g.canvas),g.enableWebGL&&g.canvas.finish2D())},g.show=function(t,e){e=e||g.canvas;for(var n,a=0,i=t.length;a<i;a++)(n=t[a])&&n.ll_show&&(n.ll_show(e),n._ll_removeFromSelf&&(a--,i--))},g.divideCoordinate=function(t,e,n,a){var i,o,r,s=t/a,l=e/n,u=[];for(i=0;i<n;i++){for(r=[],o=0;o<a;o++)r.push({x:s*o,y:l*i,width:s,height:l});u.push(r)}return u},g._create_loading_color=function(){var t=g.canvas.createRadialGradient(g.canvasObj.width/2,g.canvasObj.height,0,g.canvasObj.width/2,0,g.canvasObj.height);return t.addColorStop(0,"red"),t.addColorStop(.3,"orange"),t.addColorStop(.4,"yellow"),t.addColorStop(.5,"green"),t.addColorStop(.8,"blue"),t.addColorStop(1,"violet"),t},g.hitPolygon=function(t,e,n){var a,i,o,r,s,l=0,u=t[0],c=e<=u[0],h=n<=u[1];for(a=1,i=t.length;a<i+1;a++)r=e<=(o=t[a%i])[0],h!=(s=n<=o[1])&&(c==r?c&&(l+=h?-1:1):e<=u[0]+(o[0]-u[0])*(n-u[1])/(o[1]-u[1])&&(l+=h?-1:1)),u=o,c=r,h=s;return 0!=l},g.hitTestPolygon=function(t,e){var n,a,i,o,r,s=[[t,[],[]],[e,[],[]]];for(a=0;a<s.length;a++){for(o=s[a][0],r=s[a][1],n=0,i=o.length;n<i;n++)s[a][2].push(new LVec2(o[n][0],o[n][1])),n<i-1&&r.push(new LVec2(o[n+1][0]-o[n][0],o[n+1][1]-o[n][1]).normL());r.push(new LVec2(o[0][0]-o[i-1][0],o[0][1]-o[i-1][1]).normL())}for(a=0;a<s.length;a++)for(n=0,i=(r=s[a][1]).length;n<i;n++){var l=LVec2.getMinMax(s[0][2],r[n]),u=LVec2.getMinMax(s[1][2],r[n]);if(l.max_o<u.min_o||l.min_o>u.max_o)return!1}return!0},g.hitTestPolygonArc=function(t,e){if(g.hitPolygon(t,e[0],e[1]))return!0;var n,a,i,o,r,s,l,u,c,h;for(n=0,i=t.length;n<i;n++)if(a=n<i-1?n+1:0,o=t[n],r=t[a],s=new LVec2(e[0]-o[0],e[1]-o[1]),h=(l=new LVec2(r[0]-o[0],r[1]-o[1])).normalize(),(c=LVec2.dot(s,h))<=0){if(s.x*s.x+s.y*s.y<e[3])return!0}else if(c*c<l.x*l.x+l.y*l.y&&(u=LVec2.cross(s,h))*u<e[3])return!0;return!1},g.hitTestArc=function(t,e,n,a){var i=.5*t.getWidth(),o=.5*e.getWidth(),r=t._startX?t._startX():t.startX(),s=e._startX?e._startX():e.startX(),l=t._startY?t._startY():t.startY(),u=e._startY?e._startY():e.startY();typeof n!=UNDEFINED&&(r+=i-n,l+=i-n,i=n),typeof a!=UNDEFINED&&(s+=o-a,u+=o-a,o=a);var c=r+i-s-o,h=l+i-u-o;return c*c+h*h<(i+o)*(i+o)},g.hitTest=g.hitTestRect=function(t,e,n,a){var i=t.getWidth(),o=e.getWidth(),r=t.getHeight(),s=e.getHeight(),l=t._startX?t._startX():t.startX(),u=e._startX?e._startX():e.startX(),c=t._startY?t._startY():t.startY(),h=e._startY?e._startY():e.startY();return typeof n!=UNDEFINED&&(l+=.5*(i-n[0]),c+=.5*(r-n[1]),i=n[0],r=n[1]),typeof a!=UNDEFINED&&(u+=.5*(o-a[0]),h+=.5*(s-a[1]),o=a[0],s=a[1]),(u<l?l:u)<=(u+o<l+i?u+o:l+i)&&(h<c?c:h)<=(h+s<c+r?h+s:c+r)},g.setFrameRate=function(t){g.frameRate&&clearInterval(g.frameRate),g.speed=t,g.frameRate=setInterval(function(){g.onShow()},t)},g.ll_scaleX=function(t){return(t-g.left)*g.canvasObj.width/g.canvasStyleWidth},g.ll_scaleY=function(t){return(t-g.top)*g.canvasObj.height/g.canvasStyleHeight},g.ll_setStageSize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),g.canvasObj.style.width=t+"px",g.canvasObj.style.height=e+"px",g.canvasStyleWidth=t,g.canvasStyleHeight=e},g.resize=function(t,e){g.resizeWx(t,e);var n,a,i=0,o=0,r=window.innerWidth,s=window.innerHeight;switch(g.innerWidth=r,g.innerHeight=s,t&&(n=t),e&&(a=e),"noScale"==g.stageScale&&(n=t||g.canvasObj.width,a=e||g.canvasObj.height),g.stageScale){case"exactFit":n=t||r,a=e||s;break;case"noBorder":switch(n=t||r,a=e||g.canvasObj.height*r/g.canvasObj.width,g.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:case LStageAlign.BOTTOM_RIGHT:case LStageAlign.BOTTOM_MIDDLE:i=s-a}break;case"showAll":r/s>g.canvasObj.width/g.canvasObj.height?(a=e||s,n=t||g.canvasObj.width*s/g.canvasObj.height):(n=t||r,a=e||g.canvasObj.height*r/g.canvasObj.width);case"noScale":default:switch(g.align){case LStageAlign.BOTTOM:case LStageAlign.BOTTOM_LEFT:i=s-a;break;case LStageAlign.RIGHT:case LStageAlign.TOP_RIGHT:o=r-n;break;case LStageAlign.TOP_MIDDLE:o=.5*(r-n);break;case LStageAlign.BOTTOM_RIGHT:i=s-a,o=r-n;break;case LStageAlign.BOTTOM_MIDDLE:i=s-a,o=.5*(r-n);break;case LStageAlign.MIDDLE:i=.5*(s-a),o=.5*(r-n);break;case LStageAlign.TOP:case LStageAlign.LEFT:case LStageAlign.TOP_LEFT:}}g.canvasObj.style.marginTop=i+"px",g.canvasObj.style.marginLeft=o+"px",g.isOldFirefox&&(g.left=parseInt(g.canvasObj.style.marginLeft),g.top=parseInt(g.canvasObj.style.marginTop)),g.ll_setStageSize(n,a)},g.resizeWx=function(t,e){var n;g.wx&&(g.stageMask.removeAllChild(),"exactFit"===g.stageScale?(g.canvasObj.width=g._content_width,g.canvasObj.height=g._content_height):"showAll"===g.stageScale&&(g.stage.x=.5*(g.canvasObj.width-g._content_width),g.stage.y=.5*(g.canvasObj.height-g._content_height)),0<g.stage.x?((n=new LShape).graphics.drawRect(1,"#000000",[0,0,g.stage.x,g.canvasObj.height],!0,"#000000"),g.stageMask.addChild(n),(n=new LShape).x=g.canvasObj.width-g.stage.x,n.graphics.drawRect(1,"#000000",[0,0,g.stage.x,g.canvasObj.height],!0,"#000000"),g.stageMask.addChild(n)):0<g.stage.y&&((n=new LShape).graphics.drawRect(1,"#000000",[0,0,g.canvasObj.width,g.stage.y],!0,"#000000"),g.stageMask.addChild(n),(n=new LShape).x=g.canvasObj.height-g.stage.y,n.graphics.drawRect(1,"#000000",[0,0,g.canvasObj.width,g.stage.y],!0,"#000000"),g.stageMask.addChild(n)))},g.sleep=function(t){for(var e=new Date;(new Date).getTime()-e.getTime()<t;);},g.screen=function(t){g.displayState=t,g.stage&&("number"==typeof g.displayState?g.resize(g.canvasObj.width*g.displayState,g.canvasObj.height*g.displayState):g.resize())},g}(),LSystem=LGlobal,LStage=LGlobal;function trace(){if(LGlobal.traceDebug){var t,e=document.getElementById("traceObject");if(0<trace.arguments.length&&null==e){var n=document.createElement("DIV");n.position=0,n.style.position="absolute",document.body.appendChild(n),(e=document.createElement("TEXTAREA")).id="traceObject",e.style.width=.5*window.innerWidth+"px",e.style.height="200px";var a=document.createElement("BUTTON");a.style.width=.25*window.innerWidth+"px",a.innerHTML="Hide",n.appendChild(a),LEvent.addEventListener(a,LGlobal.mobile?"touchstart":"click",function(t){e.style.display="none"==e.style.display?"":"none"}),(a=document.createElement("BUTTON")).style.width=.25*window.innerWidth+"px",a.innerHTML="position",n.appendChild(a);function i(t){n.position++,0==n.position?(n.style.top="5px",n.style.left="5px"):1==n.position?(n.style.top=window.innerHeight-20-parseInt(e.style.height)+"px",n.style.left="5px"):2==n.position?(n.style.top="5px",n.style.left=window.innerWidth-parseInt(e.style.width)+"px"):(n.style.top=window.innerHeight-20-parseInt(e.style.height)+"px",n.style.left=window.innerWidth-parseInt(e.style.width)+"px",n.position=-1)}i(),LEvent.addEventListener(a,LGlobal.mobile?"touchstart":"click",i),n.appendChild(document.createElement("BR")),n.appendChild(e)}for(t=0;t<trace.arguments.length;t++)e.value=e.value+trace.arguments[t]+"\r\n",e.scrollTop=e.scrollHeight}}function addChild(t){LGlobal.stage.addChild(t)}function removeChild(t){LGlobal.stage.removeChild(t)}function init(e,t,n,a,i,o){LGlobal.childList=[],LGlobal.requestId&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout)(LGlobal.requestId);LGlobal.speed=e;function r(){LGlobal.canTouch&&LGlobal.aspectRatio==LANDSCAPE&&window.innerWidth<window.innerHeight?LGlobal.horizontalError():LGlobal.canTouch&&LGlobal.aspectRatio==PORTRAIT&&window.innerWidth>window.innerHeight?LGlobal.verticalError():setTimeout(i,100),LGlobal.startTimer=(new Date).getTime()}var s;if("function"==typeof e)s=function(){LGlobal.requestId=e(s),LGlobal.onShow()},LGlobal.speed=1e3/60;else{var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)};LGlobal._requestAFBaseTime=(new Date).getTime(),s=function(){var t=(new Date).getTime();t-LGlobal._now>2*e&&(LGlobal._requestAFBaseTime=t-e),.99<=((LGlobal._now=t)-LGlobal._requestAFBaseTime)/e&&(LGlobal._requestAFBaseTime+=e,LGlobal.onShow()),LGlobal.requestId=l(s,e)}}"complete"===document.readyState?(LGlobal.setCanvas(t,n,a),r(),s()):LEvent.addEventListener(window,"load",function(){LGlobal._requestAFBaseTime=(new Date).getTime(),LGlobal.setCanvas(t,n,a),r(),s()})}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.apply(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return i.apply(this instanceof e&&t?this:t,a.concat(Array.prototype.slice.call(arguments)))}var a=Array.prototype.slice.call(arguments,1),i=this;return e.prototype=this.prototype,n.prototype=new e,n}),Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),a=n.length>>>0,i=arguments[1],o=0;o<a;o++)if(e=n[o],t.call(i,e,o,n))return e}),Array.prototype.findIndex||(Array.prototype.findIndex=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),a=n.length>>>0,i=arguments[1],o=0;o<a;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,a;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(1<arguments.length&&(n=e),a=0;a<o;){var r;a in i&&(r=i[a],t.call(n,r,a,i)),a++}}),Array.prototype.every||(Array.prototype.every=function(t,e){"use strict";var n,a;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(1<arguments.length&&(n=e),a=0;a<o;){var r;if(a in i)if(r=i[a],!t.call(n,r,a,i))return!1;a++}return!0}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,a=2<=arguments.length?arguments[1]:void 0,i=0;i<n;i++)if(i in e&&t.call(a,e[i],i,e))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var a=[],i=arguments[1],o=0;o<n;o++)if(o in e){var r=e[o];t.call(i,r,o,e)&&a.push(r)}return a}),String.format||(String.format=function(t){var n=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,e){return void 0!==n[e]?n[e]:t})}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=/function\s([^(]{1,})\(/.exec(this.toString());return t&&1<t.length?t[1].trim():""},set:function(t){}}),window.console||(window.console={log:trace,warn:trace});var LInit=init;function base(t,e,n){var a=null,i=t.constructor.prototype,o={};for(a in"Object"==t.constructor.name&&console.warn("When you use the extends. You must make a method like 'XX.prototype.xxx=function(){}'. but not 'XX.prototype={xxx:function(){}}'."),typeof t.__ll__parent__==UNDEFINED&&(t.__ll__parent__=[],t.__ll__parent__=[]),t.__ll__parent__.push(e.prototype),i)o[a]=1;for(a in e.prototype)o[a]||("callParent"!=a&&0<e.prototype[a].toString().indexOf("callParent")?LGlobal.wx?i[a]=e.prototype[a]:i[a]=new Function('return this.callParent("'+a+'", arguments);'):i[a]=e.prototype[a]);i.toString==Object.prototype.toString&&(i.toString=LObject.prototype.toString),e.apply(t,n)}var LExtends=base;function getTimer(){return(new Date).getTime()-LGlobal.startTimer}function getExtension(t){var e;return 3<=(e=t.match(/([^#?]+\.)([^.#?]+)/)).length?e[2].toLowerCase():null}var LObject=function(){function t(){this.type="LObject",this.objectIndex=++LGlobal.objectIndex,this.objectindex=this.objectIndex}return t.prototype={callParent:function(t,e){if(t&&e){var n,a=this,i=!1,o="__ll__parent_call"+t;return void 0===a[o]?(i=!0,a[o]=0):a[o]++,a[o]>=a.__ll__parent__.length?!1:(n=a.__ll__parent__[a[o]][t]?a.__ll__parent__[a[o]][t].apply(a,e):a.callParent(t,e),i&&delete a[o],n)}},copyProperty:function(t){var e;for(e in t)if("number"==typeof t[e]||"string"==typeof t[e]||"boolean"==typeof t[e]){if("objectindex"==e||"objectIndex"==e)continue;this[e]=t[e]}else Array.isArray(t[e])&&(this[e]=t[e].slice());t.mask&&(this.mask=t.mask.clone())},toString:function(){return"[object "+this.constructor.name+"]"}},t}(),LTimer=function(){function a(t,e){var n=this;LExtends(n,LEventDispatcher,[]),n.type="LTimer",n.delay=t,n.repeatCount=e||Number.MAX_VALUE,n.running=!1,n.currentCount=0,n.reset(),a.TimerManager.add(n)}function t(){this.childList=[]}a.TimerManager=(t.prototype={ll_show:function(){for(var t,e=0;e<this.childList.length;e++)(t=this.childList[e])&&t.ll_show()},add:function(t){this.childList.push(t)},remove:function(t){var e,n,a=this.childList;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex){this.childList.splice(e,1);break}}},new t);var e={start:function(){this.running=!0},stop:function(){this.running=!1},reset:function(){this.currentTime=0,this.currentCount=0,this.stop()},destroy:function(){a.TimerManager.remove(this)},ll_show:function(){var t=this;!t.running||t.currentCount>=t.repeatCount||(t.currentTime+=LGlobal.speed,t.currentTime<t.delay||(t.currentTime=0,t.currentCount++,t.dispatchEvent(LTimerEvent.TIMER),t.currentCount>=t.repeatCount&&t.dispatchEvent(LTimerEvent.TIMER_COMPLETE)))}};for(var n in e)a.prototype[n]=e[n];return LGlobal.childList.push(a.TimerManager),a}(),LColorTransform=function(t,e,n,a,i,o,r,s){var l=this;LExtends(l,LObject,[]),l.redMultiplier=t,l.greenMultiplier=e,l.blueMultiplier=n,l.alphaMultiplier=a,l.redOffset=i,l.greenOffset=o,l.blueOffset=r,l.alphaOffset=s},LTransform=function(){LExtends(this,LObject,[]),this.matrix=null},LMatrix=function(){function o(t,e,n,a,i,o,r,s,l){var u=this;LExtends(u,LObject,[]),u.a=1,u.b=0,u.u=0,u.c=0,u.d=1,u.v=0,u.tx=0,u.ty=0,u.w=1,typeof t!=UNDEFINED&&(u.a=t),typeof e!=UNDEFINED&&(u.b=e),typeof n!=UNDEFINED&&(u.c=n),typeof a!=UNDEFINED&&(u.d=a),typeof i!=UNDEFINED&&(u.tx=i),typeof o!=UNDEFINED&&(u.ty=o),typeof r!=UNDEFINED&&(u.u=r),typeof s!=UNDEFINED&&(u.v=s),typeof l!=UNDEFINED&&(u.w=l)}var t={setTo:function(t,e,n,a,i,o,r,s,l){var u=this;return typeof t!=UNDEFINED&&(u.a=t),typeof e!=UNDEFINED&&(u.b=e),typeof n!=UNDEFINED&&(u.c=n),typeof a!=UNDEFINED&&(u.d=a),typeof i!=UNDEFINED&&(u.tx=i),typeof o!=UNDEFINED&&(u.ty=o),typeof r!=UNDEFINED&&(u.u=r),typeof s!=UNDEFINED&&(u.v=s),typeof l!=UNDEFINED&&(u.w=l),u},isIdentity:function(){var t=this;return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.tx&&0===t.ty&&0===t.u&&0===t.v&&1===t.w},transform:function(t){var e=this;return t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),e},identity:function(){this.setTo(1,0,0,1,0,0,0,0,1)},rotate:function(t){var e=t*Math.PI/180,n=Math.cos(e),a=Math.sin(e),i=new o(n,a,-a,n,0,0,0,0,1);return this.add(i),this},scale:function(t,e){var n=new o(t,0,0,e,0,0,0,0,1);return this.add(n),this},translate:function(t,e){var n=new o(1,0,0,1,t,e,0,0,1);return this.add(n),this},skew:function(t,e){var n=new o(1,e,t,1,0,0,0,0,1);return this.add(n),this},add:function(t){var e,n,a,i,o,r,s,l,u,c=this;e=c.a*t.a+c.b*t.c+c.u*t.tx,n=c.a*t.b+c.b*t.d+c.u*t.ty,s=c.a*t.u+c.b*t.v+c.u*t.w,a=c.c*t.a+c.d*t.c+c.v*t.tx,i=c.c*t.b+c.d*t.d+c.v*t.ty,l=c.c*t.u+c.d*t.v+c.v*t.w,o=c.tx*t.a+c.ty*t.c+c.w*t.tx,r=c.tx*t.b+c.ty*t.d+c.w*t.ty,u=c.tx*t.u+c.ty*t.v+c.w*t.w,c.setTo(e,n,a,i,o,r,s,l,u)},toArray:function(t){var e=this;if(Array.isArray(t)&&3==t.length)return[t[0]*e.a+t[1]*e.c+t[2]*e.tx,t[0]*e.b+t[1]*e.d+t[2]*e.ty,t[0]*e.u+t[1]*e.v+t[2]*e.w];var n=e.a*t.a+e.b*t.c+e.u*t.tx,a=e.a*t.b+e.b*t.d+e.u*t.ty,i=e.a*t.u+e.b*t.v+e.u*t.w,o=e.c*t.a+e.d*t.c+e.v*t.tx,r=e.c*t.b+e.d*t.d+e.v*t.ty,s=e.c*t.u+e.d*t.v+e.v*t.w;return[n,a,o,r,e.tx*t.a+e.ty*t.c+e.w*t.tx,e.tx*t.b+e.ty*t.d+e.w*t.ty,i,s,e.tx*t.u+e.ty*t.v+e.w*t.w]},clone:function(){var t=this;return new o(t.a,t.b,t.c,t.d,t.tx,t.ty,t.u,t.v,t.w)}};for(var e in t)o.prototype[e]=t[e];return o}(),LVec2=function(){function l(t,e){this.x=t||0,this.y=e||0}return l.dot=function(t,e){return t.x*e.x+t.y*e.y},l.cross=function(t,e){return t.x*e.y-t.y*e.x},l.distance=function(t,e){var n=t.x-e.x,a=t.y-e.y;return Math.sqrt(n*n+a*a)},l.getMinMax=function(t,e){for(var n=l.dot(t[0],e),a=l.dot(t[0],e),i=0,o=0,r=1;r<t.length;r++){var s=l.dot(t[r],e);s<n&&(n=s,i=r),a<s&&(a=s,o=r)}return{min_o:n,min_i:i,max_o:a,max_i:o}},l.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var t=this.length();return new l(this.x/t,this.y/t)},normR:function(){return new l(-this.y,this.x)},normL:function(){return new l(this.y,-this.x)}},l}(),LEventDispatcher=function(){function t(){LExtends(this,LObject,[]),this._eventList=new Array}var e={addEventListener:function(t,e,n){this._eventList.push({listener:e,type:t,_this:n})},removeEventListener:function(t,e,n){var a,i,o=this;for(i=o._eventList.length,a=0;a<i;a++)if(o._eventList[a]&&!(t!=o._eventList[a].type||e&&o._eventList[a].listener!=e||n&&o._eventList[a]._this&&o._eventList[a]._this.objectIndex!=n.objectIndex))return void o._eventList.splice(a,1)},removeAllEventListener:function(){this._eventList=[]},dispatchEvent:function(t){for(var e=this,n=this._eventList.length,a="string"==typeof t?t:t.eventType,i=0;i<n;i++){var o=this._eventList[i];o&&a===this._eventList[i].type&&("string"==typeof t?(e.currentTarget=e.target=e,e.eventType=e.event_type=a,o.listener.call(o._this?o._this:e,e),delete e.currentTarget,delete e.target,delete e.eventType):(t.target||(t.target=this),t.currentTarget||(t.currentTarget=t.target),t._ll_preventDefault=!1,o.listener.call(o._this?o._this:this,t)))}},hasEventListener:function(t,e){var n,a=this._eventList.length;for(n=0;n<a;n++)if(this._eventList[n]&&t==this._eventList[n].type&&(typeof e==UNDEFINED||e==this._eventList[n].listener))return!0;return!1}};for(var n in e)t.prototype[n]=e[n];return t}(),LDisplayObject=function(){function t(){var t=this;LExtends(t,LEventDispatcher,[]),t.name="instance"+t.objectIndex,t.x=0,t.y=0,t.width=0,t.height=0,t.scaleX=1,t.scaleY=1,t.alpha=1,t.visible=!0,t.rotate=0,t.mask=null,t.blendMode=null,t.filters=null,t.transform=new LTransform,t.parent=null}var e={_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},ll_show:function(t){var e=this;t=t||LGlobal.canvas,e._canShow()&&(e._ll_trans=!1,LGlobal.box2d||"function"!=typeof e._ll_loopframe||e._ll_loopframe(),t.save(),e._showReady(t),e.blendMode&&(t.globalCompositeOperation=e.blendMode),e.filters&&e._ll_setFilters(t),e._rotateReady(),null!=e.mask&&e.mask.ll_show&&!e._ll_cacheAsBitmap&&(e.mask.ll_show(t),t.clip()),e._transformRotate(t),e._transformScale(t),e._coordinate(t),e.transform.matrix&&e.transform.matrix.transform(t),e.alpha<1&&(e._ll_trans=!0,t.globalAlpha*=e.alpha),LGlobal.fpsStatus&&(LGlobal.fpsStatus.display++,e._ll_trans&&LGlobal.fpsStatus.transform++),e._ll_cacheAsBitmap?e._ll_cacheAsBitmap._ll_show(t):e._ll_show(t),t.restore(),null!=LGlobal.box2d&&"function"==typeof e._ll_loopframe&&e._ll_loopframe())},_canShow:function(){return this.visible},_coordinate:function(t){var e=this;0==e.x&&0==e.y||(e._ll_trans=!0,t.transform(1,0,0,1,e.x,e.y))},_rotateReady:function(){},_showReady:function(t){},_ll_show:function(t){},_ll_setFilters:function(t){var e,n,a=this.filters;if(a)for(e=0,n=a.length;e<n;e++)a[e].ll_show(this,t)},startX:function(){return 0},startY:function(){return 0},getWidth:function(t){return 1},getHeight:function(t){return 1},_transformRotate:function(t){var e=this;if(t=t||LGlobal.canvas,0!=e.rotate){e._ll_trans=!0;var n=Math.PI/180,a=new LMatrix;typeof e.rotatex==UNDEFINED&&(e.rotatex=0,e.rotatey=0),e.box2dBody&&(n=1),a.a=Math.cos(e.rotate*n),a.b=Math.sin(e.rotate*n),a.c=-a.b,a.d=a.a,a.tx=e.x+e.rotatex,a.ty=e.y+e.rotatey,a.transform(t).setTo(1,0,0,1,-a.tx,-a.ty).transform(t)}},_transformScale:function(t){var e,n=this;t=t||LGlobal.canvas,1==n.scaleX&&1==n.scaleY||(n._ll_trans=!0,e=new LMatrix,1!=n.scaleX&&(e.tx=n.x),1!=n.scaleY&&(e.ty=n.y),e.a=n.scaleX,e.d=n.scaleY,e.transform(t).setTo(1,0,0,1,-e.tx,-e.ty).transform(t))},getAbsoluteScale:function(){var t,e,n;for(t=this.scaleX,e=this.scaleY,n=this.parent;n&&"root"!=n;)t*=n.scaleX,e*=n.scaleY,n=n.parent;return{scaleX:t,scaleY:e}},getRootCoordinate:function(){return this.localToGlobal(new LPoint(0,0))},localToGlobal:function(t){var e;return e=this.getRootMatrix().toArray([t.x,t.y,1]),new LPoint(e[0],e[1])},globalToLocal:function(t){var e;return m=this.getLocalMatrix(),e=m.toArray([t.x,t.y,1]),new LPoint(e[0],e[1])},getBounds:function(t){if(typeof t==UNDEFINED)return new LRectangle(0,0,0,0);var e,n,a,i,o=0,r=0;return this.objectIndex!=t.objectIndex&&(a=this.getRootCoordinate(),i=t.getRootCoordinate(),o=a.x-i.x,r=a.y-i.y),e=this.getWidth(!0),n=this.getHeight(!0),new LRectangle(o,r,e,n)},cacheAsBitmap:function(t){var e=this;if(t){var n=e.x-e.startX(!0),a=e.y-e.startY(!0),i=e.getDataCanvas(n,a,e.getWidth(!0),e.getHeight(!0)),o=new LBitmapData(i,0,0,null,null,LBitmapData.DATA_CANVAS),r=new LBitmap(o);r.x=-n,r.y=-a,e._ll_cacheAsBitmap=r}else e._ll_cacheAsBitmap=null},getDataCanvas:function(t,e,n,a){var i,o,r,s,l=this;return l._createCanvas(),i=l.x,o=l.y,l.x=t||0,l.y=e||0,l.width=n||l.getWidth(),l.height=a||l.getHeight(),l._canvas.width=l.width,l._canvas.height=l.height,l.mask&&(r=l.mask.x,s=l.mask.y,l.mask.x+=l.x-i,l.mask.y+=l.y-o),l.ll_show(l._context),l.x=i,l.y=o,l.mask&&(l.mask.x=r,l.mask.y=s),l._canvas},getDataURL:function(){var t=this,e=t.x-t.startX(!0),n=t.y-t.startY(!0),a=t.getDataCanvas(e,n,t.getWidth(!0),t.getHeight(!0));return a.toDataURL.apply(a,arguments)},getParentByConstructor:function(t){for(var e=this.parent;"object"==typeof e;){if(e instanceof t)return e;e=e.parent}return null},ismouseonShapes:function(t,e,n){var a,i,o,r,s;for(typeof t==UNDEFINED&&(t=this.shapes),a=this.getRootMatrix(),o=t.length-1;0<=o;o--)if(s=(i=t[o]).arg,r=this._changeShape(i.type,s,a),i.type==LShape.VERTICES){if(LGlobal.hitPolygon(r,e,n))return!0}else if(i.type==LShape.RECT){if(LGlobal.hitPolygon(r,e,n))return!0}else if(i.type==LShape.ARC&&(r[0]-e)*(r[0]-e)+(r[1]-n)*(r[1]-n)<r[3])return!0;return!1},_changeShape:function(t,e,n){var a,i,o,r,s,l;e=e;if(t==LShape.VERTICES)for(a=[],o=0,r=e.length;o<r;o++)a[o]=n.toArray([e[o][0],e[o][1],1]);else if(t==LShape.RECT)for(r=(a=[[e[o=0],e[1]],[e[0]+e[2],e[1]],[e[0]+e[2],e[1]+e[3]],[e[0],e[1]+e[3]]]).length;o<r;o++)a[o]=n.toArray([a[o][0],a[o][1],1]);else t==LShape.ARC&&(s=n.toArray([e[0],e[1],1]),l=n.toArray([e[0]+e[2],e[1],1]),i=(s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]),a=[s[0],s[1],Math.sqrt(i),i]);return a},getRootMatrix:function(){for(var t=this,e=new LMatrix;t&&"root"!=t;)1==t.scaleX&&1==t.scaleY||e.scale(t.scaleX,t.scaleY),0!=t.rotate&&e.rotate(t.rotate),0==t.x&&0==t.y||e.translate(t.x,t.y),t=t.parent;return e},getLocalMatrix:function(){for(var t=this,e=new LMatrix,n=[];t&&"root"!=t;)n.push(t),t=t.parent;for(var a=n.length-1;0<=a;a--)0==(t=n[a]).x&&0==t.y||e.translate(-t.x,-t.y),0!=t.rotate&&e.rotate(-t.rotate),1==t.scaleX&&1==t.scaleY||e.scale(1/t.scaleX,1/t.scaleY);return e},remove:function(){var t=this.parent;t&&"root"!=t&&(t.removeChild(this),this._ll_removeFromSelf=!0)}};for(var n in e)t.prototype[n]=e[n];return t}(),LInteractiveObject=function(){function t(){LExtends(this,LDisplayObject,[]),this.type="LInteractiveObject",this.mouseEnabled=!0,this.mouseList=new Array}var e={addEventListener:function(t,e,n){if(0<=t.indexOf("mouse")||0<=t.indexOf("touch")||t===LMouseEvent.DOUBLE_CLICK){if(LMouseEventContainer.container[t]||(t===LMouseEvent.MOUSE_OVER||t===LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])return void LMouseEventContainer.addMouseEvent(this,t,e,n);this.mouseList.push({listener:e,type:t,_this:n})}else this._eventList.push({listener:e,type:t,_this:n})},removeEventListener:function(t,e,n){var a,i,o=this;if(!(0<=t.indexOf("mouse")||0<=t.indexOf("touch")||t==LMouseEvent.DOUBLE_CLICK))return o.callParent("removeEventListener",arguments);if(LMouseEventContainer.container[t]||(t==LMouseEvent.MOUSE_OVER||t==LMouseEvent.MOUSE_OUT)&&LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE])LMouseEventContainer.removeMouseEvent(o,t,e,n);else for(i=o.mouseList.length,a=0;a<i;a++)if(o.mouseList[a]&&!(t!=o.mouseList[a].type||e&&o.mouseList[a].listener!=e||n&&o.mouseList[a]._this&&o.mouseList[a]._this.objectIndex!=n.objectIndex))return void o.mouseList.splice(a,1)},removeAllEventListener:function(){var t=this;t.mouseList.length=0,t._eventList.length=0,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_DOWN),LMouseEventContainer.container[LMouseEvent.MOUSE_UP]&&LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_UP),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&(LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_MOVE),LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_OVER),LMouseEventContainer.removeMouseEvent(t,LMouseEvent.MOUSE_OUT))},hasEventListener:function(t,e){var n,a,i=this;if(LMouseEventContainer.container[t])return LMouseEventContainer.hasEventListener(i,t,e);if(!(0<=t.indexOf("mouse")||0<=t.indexOf("touch")||t==LMouseEvent.DOUBLE_CLICK))return i.callParent("hasEventListener",arguments);for(a=i.mouseList.length,n=0;n<a;n++)if(i.mouseList[n]&&t==i.mouseList[n].type&&(!e||i.mouseList[n].listener==e))return!0;return!1}};for(var n in e)t.prototype[n]=e[n];return t}(),LDisplayObjectContainer=function(){function o(){LExtends(this,LInteractiveObject,[]),this.childList=new Array,this.numChildren=0,this.mouseChildren=!0}o.destroy=function(t){LGlobal.destroy&&(t.die&&t.die(),t.removeAllChild&&t.removeAllChild())};var t={addChild:function(t){var e;return t.parent&&(e=LGlobal.destroy,LGlobal.destroy=!1,t.parent.removeChild(t),LGlobal.destroy=e),(t.parent=this).childList.push(t),this.numChildren=this.childList.length,t._ll_removeFromSelf=!1,t},addChildAt:function(t,e){var n,a=this;if(!(e<0||e>a.childList.length))return"function"==typeof t.remove&&(n=LGlobal.destroy,LGlobal.destroy=!1,t.remove(),LGlobal.destroy=n),(t.parent=a).childList.splice(e,0,t),a.numChildren=a.childList.length,t._ll_removeFromSelf=!1,t},removeChild:function(t){var e,n,a=this.childList;for(e=0,n=a.length;e<n;e++)if(t.objectIndex==a[e].objectIndex){o.destroy(t),this.childList.splice(e,1);break}this.numChildren=this.childList.length,delete t.parent,LTweenLite.removeTarget(t)},getChildAt:function(t){var e=this.childList;return 0==e.length||e.length<=t?null:e[t]},getChildByName:function(t){var e,n,a=this.childList;for(e=0,n=a.length;e<n;e++)if(a[e]&&a[e].name==t)return a[e];return null},removeChildAt:function(t){var e,n=this.childList;if(!(n.length<=t||t<0))return e=n[t],o.destroy(e),this.childList.splice(t,1),delete e.parent,LTweenLite.removeTarget(e),this.numChildren=this.childList.length,e},getChildIndex:function(t){if(!t)return-1;var e,n=this.childList,a=n.length;for(e=0;e<a;e++)if(n[e].objectIndex==t.objectIndex)return e;return-1},setChildIndex:function(t,e){var n,a=this.childList,i=a.length;if("root"==t.parent||t.parent.objectIndex!=this.objectIndex||e<0||i<=e)return-1;for(n=0;n<i&&a[n].objectIndex!=t.objectIndex;n++);return this.childList.splice(n,1),this.childList.splice(e,0,t),e},resize:function(){this.width=this.getWidth(),this.height=this.getHeight()},removeAllChild:function(){var t,e,n=this,a=n.childList;for(t=0,e=a.length;t<e;t++){var i=a[t];o.destroy(i),delete i.parent,LTweenLite.removeTarget(i)}n.childList.length=0,n.width=0,n.height=0,n.numChildren=0}};for(var e in t)o.prototype[e]=t[e];return o}(),LLoader=function(){function a(){LExtends(this,LEventDispatcher,[]),this.type="LLoader"}return a.TYPE_BITMAPDATE="bitmapData",a.prototype.load=function(t,e,n){var i=this;e=e||a.TYPE_BITMAPDATE,i.loadtype=e,i.useXHR=n&&!LAjax.local&&LAjax.canUseBlob,e==a.TYPE_BITMAPDATE&&(i.useXHR?(LAjax.responseType=LAjax.ARRAY_BUFFER,LAjax.progress=function(t){var e=new LEvent(LEvent.PROGRESS);e.currentTarget=i,e.target=t.currentTarget,e.loaded=t.loaded,e.total=t.total,e.responseURL=t.responseURL,i.dispatchEvent(e)},LAjax.post(t,{},function(e){var n;try{n=new Blob([e],{type:"image/png"})}catch(t){if("TypeError"===t.name&&window.BlobBuilder){var a=new BlobBuilder;a.append(e),n=a.getBlob()}else n=null,i.useXHR=!1}i.useXHR&&(t=i.createObjectURL(n)),i.loadStart(t)},function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=i,e.target=t,e.responseURL=t.responseURL,i.dispatchEvent(e)})):i.loadStart(t))},a.prototype.loadStart=function(t){var n=this;n.content=new Image,n.content.onload=function(){n.content.onload=null;var t=new LEvent(LEvent.COMPLETE);t.currentTarget=n,t.target=n.content,n.useXHR&&n.revokeObjectURL(n.content.src),n.dispatchEvent(t),delete n.content},n.useXHR||(n.content.onerror=function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=n,e.target=t.target,e.responseURL=t.target.src,n.dispatchEvent(e)}),n.content.src=t},a.prototype.createObjectURL=function(t){return(window.URL||window.webkitURL).createObjectURL(t)},a.prototype.revokeObjectURL=function(t){(window.URL||window.webkitURL).revokeObjectURL(t)},a}(),LURLLoader=function(){function r(){var t=this;LExtends(t,LEventDispatcher,[]),t.type="LURLLoader",t.loadtype="",t.content=null,t.event={}}return r.TYPE_TEXT="text",r.TYPE_JS="js",r.prototype.load=function(n,t){var e,a,i=this;if(t||("txt"==(a=getExtension(n))?t=r.TYPE_TEXT:"js"==a&&(t=r.TYPE_JS)),(i.loadtype=t)==r.TYPE_TEXT)LAjax.progress=function(t){var e=new LEvent(LEvent.PROGRESS);e.currentTarget=i,e.target=t.currentTarget,e.loaded=t.loaded,e.total=t.total,e.responseURL=t.responseURL,i.dispatchEvent(e)},LAjax.get(n,{},function(t){e=new LEvent(LEvent.COMPLETE),i.data=t,e.currentTarget=i,e.target=t,i.dispatchEvent(e),delete i.content,delete i.data},function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=i,e.target=t,e.responseURL=t.responseURL,i.dispatchEvent(e)});else if(t==r.TYPE_JS)if(LGlobal.wx)setTimeout(function(){(e=new LEvent(LEvent.COMPLETE)).currentTarget=i,(e.target=i).dispatchEvent(e),delete i.content});else{var o=document.createElement("script");o.onerror=function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=i,e.target=t.target,e.responseURL=n,i.dispatchEvent(e)},o.onload=function(){(e=new LEvent(LEvent.COMPLETE)).currentTarget=i,(e.target=i).dispatchEvent(e),delete i.content},o.src=n,o.type="text/javascript",document.querySelector("head").appendChild(o)}},r}(),LFontLoader=function(){function t(){LExtends(this,LEventDispatcher,[]),this.type="LFontLoader"}return t.TYPE_FONT="font",t.prototype.load=function(n,t){var e,a,i,o,r,s,l=this,u="";(e=document.createElement("style")).onerror=function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=l,e.target=t.target,e.responseURL=n,l.dispatchEvent(e)},o=n.split(",");for(var c=0;c<o.length;c++)"ttf"==(s=(r=o[c].split("."))[r.length-1])?a=o[c]:"eot"==s&&(i=o[c]);u="@font-face { font-family:'"+t+"';",i&&(u+="src: url("+i+");"),a&&(u+="src: local('lufy'),url("+a+") format('opentype');"),e.innerHTML=u,document.querySelector("head").appendChild(e);function h(){var t=new LEvent(LEvent.COMPLETE);t.currentTarget=l,(t.target=l).dispatchEvent(t)}if(document.fonts)try{new FontFace(t,"url("+(a||i)+")",{}).load().then(h)}catch(t){setTimeout(h,1)}else setTimeout(h,1)},t}(),LWebAudio=function(){function l(){var t=this;LExtends(t,LEventDispatcher,[]),t.currentTime=0,t.currentStart=0,t.currentSave=0,t.length=0,t.loopStart=0,t.loopEnd=0,t.loopIndex=0,t.loopLength=1,t.playing=!1,t.volume=1,LSound.Container.add(t)}l.container=[],l.containerCount=0;try{l.audioTag=new Audio}catch(t){console.warn("ReferenceError: Can't find variable: Audio"),l.audioTag={canPlayType:function(){return!1}}}l._context=null;var t={getWebAudio:function(){var e;if(0<l.container.length)e=l.container.shift();else if(typeof AudioContext!==UNDEFINED)try{e=new AudioContext}catch(t){l.containerCount=l.container.length,e=l.container.shift()}else{if(typeof webkitAudioContext===UNDEFINED)throw"AudioContext not supported. :(";try{e=new webkitAudioContext}catch(t){l.containerCount=l.container.length,e=l.container.shift()}}return e.createGainNode||(e.createGainNode=e.createGain),l.container.push(e),e},onload:function(t){var e=this;if("[object AudioBuffer]"===Object.prototype.toString.apply(t)){e.data||(e.data=e.getWebAudio()),e.buffer=t,e.length=e.buffer.duration;var n=new LEvent(LEvent.COMPLETE);n.currentTarget=e,n.target=e.buffer,e.dispatchEvent(n)}else e.load(t)},_onended:function(){var t=this;t.dispatchEvent(LEvent.SOUND_COMPLETE),t.close(),++t.loopIndex<t.loopLength&&t.play(t.currentStart,void 0,t.currentTimeTo)},load:function(t){var a=this;if("string"==typeof t){var e,n,i,o,r={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};for(e=t.split(","),i=0;i<e.length;i++){if((o=r[o=(n=e[i].split("."))[n.length-1]]?r[o]:[o]).some(function(t,e,n){return l.audioTag.canPlayType(a._type+"/"+t)}))return LAjax.responseType=LAjax.ARRAY_BUFFER,LAjax.progress=function(t){var e=new LEvent(LEvent.PROGRESS);e.currentTarget=a,e.target=t.currentTarget,e.loaded=.5*t.loaded,e.total=t.total,e.responseURL=t.responseURL,a.dispatchEvent(e)},void LAjax.get(e[i],{},a.onload.bind(a),function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=a,e.target=t,e.responseURL=t.responseURL,a.dispatchEvent(e)});console.warn("Not support "+n[n.length-1]+" : "+e[i]);var s=new LEvent(LEvent.COMPLETE);s.currentTarget=s.target=a,a.dispatchEvent(s)}}else"[object AudioBuffer]"==Object.prototype.toString.apply(t)?a.onload(t):"[object ArrayBuffer]"==Object.prototype.toString.apply(t)&&(a.data||(a.data=a.getWebAudio()),a.data.decodeAudioData(t,a.onload.bind(a),function(t){throw"AudioContext decodeAudioData error : "+t.toString()}))},getCurrentTime:function(){var t=this;return t.playing?t.data.currentTime-t.currentSave+t.currentTime:t.currentSave},setVolume:function(t){this.volume=t,this.playing&&(this.volumeNode.gain.value=t)},getVolume:function(){return this.volume},play:function(t,e,n){var a=this;0!=a.length&&(typeof e!==UNDEFINED&&(a.loopIndex=0,a.loopLength=e),typeof t!==UNDEFINED&&(a.currentTime=t,a.currentStart=t),a.currentTimeTo=typeof n!==UNDEFINED?n>a.length?a.length:n:a.length,a.data.resume&&a.data.resume(),a.data.loop=!1,a.playing=!0,a.timeout&&(clearTimeout(a.timeout),delete a.timeout),a.timeout=setTimeout(a._onended.bind(a),1e3*(a.currentTimeTo-a.currentTime)),a.bufferSource=a.data.createBufferSource(),a.bufferSource.buffer=a.buffer,a.volumeNode=a.data.createGainNode(),a.volumeNode.gain.setTargetAtTime=a.volumeNode.gain.setTargetAtTime||a.volumeNode.gain.setTargetValueAtTime||a._setTargetAtTime,a.volumeNode.gain.setValueAtTime(a.volume,a.currentTime,.5),a.volumeNode.connect(a.data.destination),a.bufferSource.connect(a.volumeNode),a.currentSave=a.data.currentTime,a.bufferSource.start?a.bufferSource.start(0,a.currentTime,a.length-a.currentTime):a.bufferSource.noteGrainOn(0,a.currentTime,a.length-a.currentTime))},_setTargetAtTime:function(t,e,n){this.volumeNode.gain.value=t},playSegment:function(t,e,n){this.playTo(t,t+e,n)},playTo:function(t,e,n){this.play(t,n,e)},stop:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.bufferSource.stop?t.bufferSource.stop(0):t.bufferSource.noteOff(0),t.currentSave=t.getCurrentTime(),t.currentTime=t.currentSave,t.playing=!1)},close:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.bufferSource.stop?t.bufferSource.stop(0):t.bufferSource.noteOff(0),t.playing=!1,t.currentTime=0,t.currentSave=0)},ll_check:function(){var t=this;t.playing&&t.currentTimeTo<t.data.currentTime-t.currentSave+.001*LSound.Container.time&&t._onended()},die:function(){LSound.Container.remove(this)}};for(var e in t)l.prototype[e]=t[e];return l}(),LMedia=function(){function t(){var t=this;LExtends(t,LDisplayObject,[]),t.length=0,t.loopIndex=0,t.loopLength=1,t.playing=!1,t.oncomplete=null,t.onsoundcomplete=null,t.currentStart=0,LSound.Container.add(this)}var e={onload:function(){var n=this;if(n.canplaythrough=n.canplaythrough||function(){n.onload()},n.error=n.error||function(t){var e=new LEvent(LEvent.ERROR);e.currentTarget=n,e.target=t.target,e.responseURL=t.target.src,n.dispatchEvent(e)},n._addEvent||(LGlobal.wx&&n.data.addEventListener("ended",function(){n._onended(!1)},!1),n.data.addEventListener("error",n.error,!1),n.data.addEventListener("canplaythrough",n.canplaythrough,!1)),n._addEvent=!0,n.data.readyState){n.data.removeEventListener("error",n.error),n.data.removeEventListener("canplaythrough",n.canplaythrough),n.length=n.data.duration-(LGlobal.android&&!LGlobal.wx?.1:0);var t=new LEvent(LEvent.COMPLETE);return t.currentTarget=n,t.target=n.data,void n.dispatchEvent(t)}},_onended:function(){var t,e=this;e.dispatchEvent(LEvent.SOUND_COMPLETE),++e.loopIndex<e.loopLength?(t=e.loopIndex,e.loopLength,e.close(),e.play(e.currentStart,e.loopLength,e.currentTimeTo),e.loopIndex=t):LGlobal.wx||e.close()},load:function(t){var a=this;if("[object HTMLAudioElement]"==Object.prototype.toString.apply(t)||"object"==typeof t&&"AUDIO"===t.tagName)return a.data=t,void a.onload();var e,n,i,o,r={mov:["quicktime"],"3gp":["3gpp"],midi:["midi"],mid:["midi"],ogv:["ogg"],m4a:["acc"],mp3:["mpeg"],wav:["wav","x-wav","wave"],wave:["wav","x-wav","wave"],aac:["mp4","aac"]};for(e=t.split(","),i=0;i<e.length;i++){if((o=r[o=(n=e[i].split("."))[n.length-1]]?r[o]:[o]).some(function(t,e,n){return a.data.canPlayType(a._type+"/"+t)}))return void(LGlobal.wx?(a.onload(),a.data.src=e[i]):(a.data.src=e[i],a.onload(),a.data.load()));console.warn("Not support "+n[n.length-1]+" : "+e[i]);var s=new LEvent(LEvent.COMPLETE);s.currentTarget=s.target=a,a.dispatchEvent(s)}a.oncomplete&&a.oncomplete({})},getCurrentTime:function(){return this.data.currentTime},setVolume:function(t){this.data.volume=t},getVolume:function(){return this.data.volume},play:function(t,e,n){var a=this;if(0!=a.length||LGlobal.wx){if(LGlobal.android&&!LGlobal.wx&&LSound.Container.stopOther(this),typeof t==UNDEFINED&&(t=0),typeof e!=UNDEFINED&&(a.loopLength=e),a.currentTimeTo=typeof n!==UNDEFINED?n>a.length?a.length:n:a.length,a.timeout&&(clearTimeout(a.timeout),delete a.timeout),LGlobal.wx||(a.timeout=setTimeout(function(){a._onended()},1e3*(a.currentTimeTo-a.data.currentTime))),LGlobal.wx){if(a._wxDataList=a._wxDataList||[],0<a._wxDataList.length&&(a.data=a._wxDataList.shift()),0==a._wxDataList.length){var i=new Audio;i.addEventListener("ended",function(){a._onended(!1)},!1),i.src=a.data.src,a._wxDataList.push(i)}a._wxDataList.push(a.data)}a.data.loop=!1,a.loopIndex=0,a.playing=!0,a.data.currentTime=t,a.currentStart=t,a.data.play()}},playSegment:function(t,e,n){this.playTo(t,t+e,n)},playTo:function(t,e,n){this.play(t,n,e)},stop:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.playing=!1,t.data.pause())},close:function(){var t=this;t.playing&&(t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.playing=!1,t.data.pause(),t.data.currentTime=0,t.currentSave=0)},ll_check:function(){var t=this;t.playing&&!LGlobal.wx&&(t.data.duration!=t._ll_duration&&(t._ll_duration=t.data.duration,t.length=t.data.duration-(LGlobal.android?.1:0)),t.currentTimeTo<t.data.currentTime+.005*LSound.Container.time&&t._onended())},die:function(){LSound.Container.remove(this)}};for(var n in e)t.prototype[n]=e[n];return t}(),LSound=function(){function i(t){var e=this;if(e.type="LSound",e._type="audio",i.webAudioEnabled&&LGlobal.webAudio)LExtends(e,LWebAudio,[]);else{LExtends(e,LMedia,[]);try{e.data=new Audio}catch(t){console.warn("ReferenceError: Can't find variable: Audio"),e.data={}}e.data.loop=!1,e.data.autoplay=!1}t&&e.load(t)}i.TYPE_SOUND="sound",i.webAudioEnabled=!1,i._waitSounds=[],i.addWait=function(t,e){i._waitSounds.push({sound:t,path:e})},i.startLoad=function(t){0!==i._waitSounds.length&&(i._waitSounds.forEach(function(t){t.sound.load(t.path)}),i._waitSounds.length=0)};var t=location.protocol;if("http:"==t||"https:"==t){if(typeof AudioContext!==UNDEFINED)try{LWebAudio._context=new AudioContext}catch(t){}else if(typeof webkitAudioContext!==UNDEFINED)try{LWebAudio._context=new webkitAudioContext}catch(t){}LWebAudio._context&&(LWebAudio.container.push(LWebAudio._context),i.webAudioEnabled=!0)}return i.Container={ll_save:0,time:0,list:[],ll_show:function(){var t=i.Container,e=(new Date).getTime();t.time=e-(t.ll_save?t.ll_save:e),t.ll_save=e;for(var n=t.list,a=n.length-1;0<=a;a--)n[a]&&n[a].ll_check()},add:function(t){0<=i.Container.list.indexOf(t)||i.Container.list.push(t)},remove:function(t){for(var e=i.Container.list,n=e.length-1;0<=n;n--)if(e[n].objectIndex==t.objectIndex){e.splice(n,1);break}},stopOther:function(t){for(var e=i.Container.list,n=e.length-1;0<=n;n--)e[n].objectIndex!=t.objectIndex&&e[n].stop()}},LGlobal.childList.push(i.Container),i}(),LVideo=function(){function t(t){var e=this;LExtends(e,LMedia,[]),e.type="LVideo",e._type="video",e.rotatex=0,e.rotatey=0;var n="";LGlobal.os==OS_IPHONE&&10<=LGlobal.iOSversion[0]&&(e.sound=new LSound,n=" muted playsinline ");var a=document.createElement("div");a.id="div_video_"+e.objectIndex,a.innerHTML='<video id="video_'+e.objectIndex+'" '+n+' style="opacity: 1;width:0px;height:0px;position:absolute;index-z:-999;">',document.body.appendChild(a),e.data=document.getElementById("video_"+e.objectIndex),e.data.loop=!1,e.data.autoplay=!1,t&&e.load(t)}var e={_ll_show:function(t){t.drawImage(this.data,this.x,this.y)},load:function(t){this.callParent("load",arguments),this.sound&&this.sound.load(t)},play:function(t,e,n){this.callParent("play",arguments),this.sound&&this.sound.play(t,e,n)},stop:function(){this.callParent("stop",arguments),this.sound&&this.sound.stop()},setVolume:function(t){this.sound?this.sound.setVolume(t):this.callParent("setVolume",arguments)},getVolume:function(){return this.sound?this.sound.getVolume():this.callParent("getVolume",arguments)},close:function(){this.callParent("close",arguments),this.sound&&this.sound.close()},die:function(){document.body.removeChild(document.getElementById("div_video_"+this.objectIndex)),delete this.data,delete this.sound},getWidth:function(){return this.data.width},getHeight:function(){return this.data.height}};for(var n in e)t.prototype[n]=e[n];return t}(),LPoint=function(){function a(t,e){this.x=t,this.y=e}return a.distance=function(t,e){return a.distance2(t.x,t.y,e.x,e.y)},a.distance2=function(t,e,n,a){var i=t-n,o=e-a;return Math.sqrt(i*i+o*o)},a.interpolate=function(t,e,n){return new a(t.x+(e.x-t.x)*(1-n),t.y+(e.y-t.y)*(1-n))},a.polar=function(t,e){return new a(t*Math.cos(e),t*Math.sin(e))},a.prototype={toString:function(){return"[object LPoint("+this.x+","+this.y+")]"},length:function(){return a.distance2(this.x,this.y,0,0)},add:function(t){return new a(this.x+t.x,this.y+t.y)},clone:function(){return new a(this.x,this.y)},setTo:function(t,e){this.x=t,this.y=e},copyFrom:function(t){this.setTo(t.x,t.y)},equals:function(t){return this.x==t.x&&this.y==t.y},normalize:function(t){var e=t/this.length();this.x*=e,this.y*=e},offset:function(t,e){this.x+=t,this.y+=e},subtract:function(t){return new a(this.x-t.x,this.y-t.y)}},a}(),LRectangle=function(){function r(t,e,n,a){var i=this;i.x=t,i.y=e,i.width=n,i.height=a,i.setRectangle()}return r.prototype={setRectangle:function(){var t=this;t.bottom=t.y+t.height,t.right=t.x+t.width,t.left=t.x,t.top=t.y},clone:function(){return new r(this.x,this.y,this.width,this.height)},contains:function(t,e){return t>=this.x&&t<=this.right&&e>=this.y&&e<=this.bottom},containsRect:function(t){return t.x>=this.x&&t.right<=this.right&&t.y>=this.y&&t.bottom<=this.bottom},equals:function(t){return t.x==this.x&&t.width==this.width&&t.y==this.y&&t.height==this.height},inflate:function(t,e){this.width+=t,this.height+=e,this.setRectangle()},intersection:function(t){var e=this,n=e.x>t.x?e.x:t.x,a=e.y>t.y?e.y:t.y,i=e.right>t.right?t.right:e.right,o=e.bottom>t.bottom?t.bottom:e.bottom;return n<=i&&a<=o?new r(n,a,i,o):new r(0,0,0,0)},intersects:function(t){var e=this,n=e.x>t.x?e.x:t.x,a=e.y>t.y?e.y:t.y,i=e.right>t.right?t.right:e.right,o=e.bottom>t.bottom?t.bottom:e.bottom;return n<=i&&a<=o},isEmpty:function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},offset:function(t,e){this.x+=t,this.y+=e,this.setRectangle()},setEmpty:function(){var t=this;t.x=0,t.y=0,t.width=0,t.height=0,t.setRectangle()},setTo:function(t,e,n,a){var i=this;i.x=t,i.y=e,i.width=n,i.height=a,i.setRectangle()},toString:function(){return"[object LRectangle("+this.x+","+this.y+","+this.width+","+this.height+")]"},union:function(t){var e=this;return new r(e.x>t.x?t.x:e.x,e.y>t.y?t.y:e.y,e.right>t.right?e.right:t.right,e.bottom>t.bottom?e.bottom:t.bottom)}},r}(),LGraphics=function(){function o(){var t=this;LExtends(t,LObject,[]),t.type="LGraphics",t.color="#000000",t.alpha=1,t.bitmap=null,t.setList=new Array,t.showList=new Array}var t={ll_show:function(t){var e,n=this.setList.length;if(0!=n)for(e=0;e<n;e++)this.setList[e](t),LGlobal.fpsStatus&&LGlobal.fpsStatus.graphics++},clone:function(){var t,e,n,a=this,i=new o;for(i.color=a.color,i.alpha=a.alpha,i.bitmap=a.bitmap,t=0,e=a.setList.length;t<e;t++)n=a.setList[t],i.setList.push(n);for(t=0,e=a.showList.length;t<e;t++)n=a.showList[t],i.showList.push(n);return i},lineCap:function(e){this.setList.push(function(t){t.lineCap=e})},lineJoin:function(e){this.setList.push(function(t){t.lineJoin=e})},lineWidth:function(e){this.setList.push(function(t){t.lineWidth=e})},strokeStyle:function(e){this.setList.push(function(t){t.strokeStyle=e})},stroke:function(){this.setList.push(function(t){t.stroke()})},beginPath:function(){this.setList.push(function(t){t.beginPath()})},closePath:function(){this.setList.push(function(t){t.closePath()})},moveTo:function(e,n){this.setList.push(function(t){t.moveTo(e,n)}),this.showList.push({type:LShape.POINT,arg:[e,n]})},lineTo:function(e,n){this.setList.push(function(t){t.lineTo(e,n)}),this.showList.push({type:LShape.POINT,arg:[e,n]})},rect:function(e,n,a,i){this.setList.push(function(t){t.rect(e,n,a,i)}),this.showList.push({type:LShape.RECT,arg:[e,n,a,i]})},fillStyle:function(e){this.setList.push(function(t){t.fillStyle=e})},fill:function(){this.setList.push(function(t){t.fill()})},arc:function(e,n,a,i,o,r){this.setList.push(function(t){t.arc(e,n,a,i,o,r)}),this.showList.push({type:LShape.ARC,arg:i})},lineStyle:function(e,n){null==n&&(n=this.color),this.color=n,this.setList.push(function(t){t.lineWidth=e,t.strokeStyle=n})},clear:function(){this.bitmap=null,this.setList.length=0,this.showList.length=0},beginBitmapFill:function(t){var e=this;e.setList.push(function(){e.bitmap=t})},drawEllipse:function(h,d,p,f,v){var g=this;g.setList.push(function(t){var e,n,a,i,o,r,s,l,u,c;if(t.beginPath(),e=p[0],n=p[1],o=(a=p[2])/2*.5522848,r=(i=p[3])/2*.5522848,s=e+a,l=n+i,u=e+a/2,c=n+i/2,t.moveTo(e,c),t.bezierCurveTo(e,c-r,u-o,n,u,n),t.bezierCurveTo(u+o,n,s,c-r,s,c),t.bezierCurveTo(s,c+r,u+o,l,u,l),t.bezierCurveTo(u-o,l,e,c+r,e,c),g.bitmap)return t.save(),t.clip(),t.drawImage(g.bitmap.image,g.bitmap.x,g.bitmap.y,g.bitmap.width,g.bitmap.height,0,0,g.bitmap.width,g.bitmap.height),t.restore(),void(g.bitmap=null);f&&(t.fillStyle=v,t.fill()),0<h&&(t.lineWidth=h,t.strokeStyle=d,t.stroke())}),g.showList.push({type:LShape.RECT,arg:p})},drawArc:function(e,n,a,i,o){var r=this;r.setList.push(function(t){if(t.beginPath(),6<a.length&&a[6]&&t.moveTo(a[0],a[1]),t.arc(a[0],a[1],a[2],a[3],a[4],a[5]),6<a.length&&a[6]&&t.lineTo(a[0],a[1]),r.bitmap)return t.save(),t.clip(),t.drawImage(r.bitmap.image,r.bitmap.x,r.bitmap.y,r.bitmap.width,r.bitmap.height,0,0,r.bitmap.width,r.bitmap.height),t.restore(),void(r.bitmap=null);i&&(t.fillStyle=o,t.fill()),0<e&&(t.lineWidth=e,t.strokeStyle=n,t.stroke())}),r.showList.push({type:LShape.ARC,arg:a})},drawRect:function(e,n,a,i,o){var r=this;r.setList.push(function(t){if(t.beginPath(),t.rect(a[0],a[1],a[2],a[3]),t.closePath(),r.bitmap)return t.save(),t.clip(),t.drawImage(r.bitmap.image,r.bitmap.x,r.bitmap.y,r.bitmap.width,r.bitmap.height,0,0,r.bitmap.width,r.bitmap.height),t.restore(),void(r.bitmap=null);i&&(t.fillStyle=o,t.fill()),0<e&&(t.lineWidth=e,t.strokeStyle=n,t.stroke())}),r.showList.push({type:LShape.RECT,arg:a})},drawRoundRect:function(e,n,a,i,o){var r=this;LGlobal.enableWebGL?r.drawRect(e,n,a,i,o):(r.setList.push(function(t){if(t.beginPath(),t.moveTo(a[0]+a[4],a[1]),t.lineTo(a[0]+a[2]-a[4],a[1]),t.arcTo(a[0]+a[2],a[1],a[0]+a[2],a[1]+a[4],a[4]),t.lineTo(a[0]+a[2],a[1]+a[3]-a[4]),t.arcTo(a[0]+a[2],a[1]+a[3],a[0]+a[2]-a[4],a[1]+a[3],a[4]),t.lineTo(a[0]+a[4],a[1]+a[3]),t.arcTo(a[0],a[1]+a[3],a[0],a[1]+a[3]-a[4],a[4]),t.lineTo(a[0],a[1]+a[4]),t.arcTo(a[0],a[1],a[0]+a[4],a[1],a[4]),t.closePath(),r.bitmap)return t.save(),t.clip(),t.drawImage(r.bitmap.image,0,0,r.bitmap.width,r.bitmap.height,0,0,r.bitmap.width,r.bitmap.height),t.restore(),void(r.bitmap=null);i&&(t.fillStyle=o,t.fill()),0<e&&(t.lineWidth=e,t.strokeStyle=n,t.stroke())}),r.showList.push({type:LShape.RECT,arg:a}))},drawVertices:function(i,o,r,s,l){var u=this;r.length<3||(u.setList.push(function(t){t.beginPath(),t.moveTo(r[0][0],r[0][1]);var e,n,a=r.length;for(e=1;e<a;e++)n=r[e],t.lineTo(n[0],n[1]);if(t.lineTo(r[0][0],r[0][1]),t.closePath(),u.bitmap)return t.save(),t.clip(),t.drawImage(u.bitmap.image,u.bitmap.x,u.bitmap.y,u.bitmap.width,u.bitmap.height,0,0,u.bitmap.width,u.bitmap.height),t.restore(),void(u.bitmap=null);s&&(t.fillStyle=l,t.fill()),0<i&&(t.lineWidth=i,t.strokeStyle=o,t.closePath(),t.stroke())}),u.showList.push({type:LShape.VERTICES,arg:r}))},drawTriangles:function(c,h,d,p,f){var v,g,L=this,E=h.length;L.setList.push(function(t){var e,n,a=c;for(g=v=0;v<E;v+=3){if(t.save(),t.beginPath(),t.moveTo(a[2*h[v]],a[2*h[v]+1]),t.lineTo(a[2*h[v+1]],a[2*h[v+1]+1]),t.lineTo(a[2*h[v+2]],a[2*h[v+2]+1]),t.lineTo(a[2*h[v]],a[2*h[v]+1]),t.closePath(),p&&(t.lineWidth=p,t.strokeStyle=f,t.stroke()),t.clip(),v%6==0){n=-1;var i=(d[2*h[v+1+g]]-d[2*h[v+g]])*L.bitmap.width,o=(d[2*h[v+2]+1]-d[2*h[v]+1])*L.bitmap.height;if(0==g&&i<0){for(e=v+9;e<E;e+=3)if(d[2*h[v+2]+1]==d[2*h[e+2]+1]){g=e-v;break}0==g&&(g=E-v),i=(d[2*h[v+1+g]]-d[2*h[v+g]])*L.bitmap.width}E<=v+g?(i=(d[2*h[v+g-E]]-d[2*h[v+1]])*L.bitmap.width,(n=1==d[2*h[v]]?0:L.bitmap.width*d[2*h[v]]+i)>L.bitmap.width&&(n-=L.bitmap.width)):n=L.bitmap.width*d[2*h[v+g]],sh=L.bitmap.height*d[2*h[v]+1],o<0&&(o=(d[2*h[v+2-(0<v?6:-6)]+1]-d[2*h[v-(0<v?6:-6)]+1])*L.bitmap.height,sh=0);var r=(a[2*h[v+1]]-a[2*h[v]])/i,s=(a[2*h[v+1]+1]-a[2*h[v]+1])/i,l=(a[2*h[v+2]]-a[2*h[v]])/o,u=(a[2*h[v+2]+1]-a[2*h[v]+1])/o;t.transform(r,s,l,u,a[2*h[v]],a[2*h[v]+1]),t.drawImage(L.bitmap.image,L.bitmap.x+n,L.bitmap.y+sh,i,o,0,0,i,o)}else{i=(d[2*h[v+2+g]]-d[2*h[v+1+g]])*L.bitmap.width,o=(d[2*h[v+2]+1]-d[2*h[v]+1])*L.bitmap.height;if(0==g&&i<0){for(e=v+9;e<E;e+=3)if(d[2*h[v+2]+1]==d[2*h[e+2]+1]){g=e-v;break}0==g&&(g=E-v),i=(d[2*h[v+2+g]]-d[2*h[v+1+g]])*L.bitmap.width}E<=v+1+g?(i=(d[2*h[v+1+g-E]]-d[2*h[v+2]])*L.bitmap.width,(n=1==d[2*h[v+1]]?0:L.bitmap.width*d[2*h[v+1]]+i)>L.bitmap.width&&(n-=L.bitmap.width)):n=L.bitmap.width*d[2*h[v+1+g]],sh=L.bitmap.height*d[2*h[v]+1],o<0&&(o=(d[2*h[v+2-(0<v?6:-6)]+1]-d[2*h[v-(0<v?6:-6)]+1])*L.bitmap.height,sh=0);r=(a[2*h[v+2]]-a[2*h[v+1]])/i,s=(a[2*h[v+2]+1]-a[2*h[v+1]+1])/i,l=(a[2*h[v+2]]-a[2*h[v]])/o,u=(a[2*h[v+2]+1]-a[2*h[v]+1])/o;t.transform(r,s,l,u,a[2*h[v+1]],a[2*h[v+1]+1]),t.drawImage(L.bitmap.image,L.bitmap.x+n,L.bitmap.y+sh,i,o,0,-o,i,o)}t.restore()}})},drawLine:function(e,n,a){this.setList.push(function(t){t.beginPath(),t.moveTo(a[0],a[1]),t.lineTo(a[2],a[3]),t.lineWidth=e,t.strokeStyle=n,t.closePath(),t.stroke()}),this.showList.push({type:LShape.LINE,arg:a})},add:function(t){this.setList.push(t)},ismouseon:function(t,e){return!(null==t||t==UNDEFINED||0==this.showList.length||!this.parent)&&this.parent.ismouseonShapes(this.showList,t.offsetX,t.offsetY)},getWidth:function(){var t,e,n,a,i,o,r,s=this;for(t=0,o=s.showList.length;t<o;t++)if(s.showList[t].type==LShape.RECT)(n>s.showList[t].arg[0]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]),(a<s.showList[t].arg[0]+s.showList[t].arg[2]||typeof a==UNDEFINED)&&(a=s.showList[t].arg[0]+s.showList[t].arg[2]);else if(s.showList[t].type==LShape.ARC)(n>s.showList[t].arg[0]-s.showList[t].arg[2]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]-s.showList[t].arg[2]),(a<s.showList[t].arg[0]+s.showList[t].arg[2]||typeof a==UNDEFINED)&&(a=s.showList[t].arg[0]+s.showList[t].arg[2]);else if(s.showList[t].type==LShape.VERTICES)for(e=0,r=s.showList[t].arg.length;e<r;e++)(n>(i=s.showList[t].arg[e])[0]||typeof n==UNDEFINED)&&(n=i[0]),(a<i[0]||typeof a==UNDEFINED)&&(a=i[0]);else s.showList[t].type==LShape.LINE?((n>s.showList[t].arg[0]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]),(n>s.showList[t].arg[2]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[2]),(a<s.showList[t].arg[0]||typeof a==UNDEFINED)&&(a=s.showList[t].arg[0]),(a<s.showList[t].arg[2]||typeof a==UNDEFINED)&&(a=s.showList[t].arg[2])):s.showList[t].type==LShape.POINT&&((n>s.showList[t].arg[0]||typeof n==UNDEFINED)&&(n=s.showList[t].arg[0]),(a<s.showList[t].arg[0]||typeof a==UNDEFINED)&&(a=s.showList[t].arg[0]));return typeof n==UNDEFINED&&(n=a=0),s.left=n,0<o&&a==n&&(a=n+1),a-n},getHeight:function(){var t,e,n,a,i,o=this,r=null,s=null;for(r=0,t=o.showList.length;r<t;r++)if(o.showList[r].type==LShape.RECT)(n>o.showList[r].arg[1]||typeof n==UNDEFINED)&&(n=o.showList[r].arg[1]),(a<o.showList[r].arg[1]+o.showList[r].arg[3]||typeof a==UNDEFINED)&&(a=o.showList[r].arg[1]+o.showList[r].arg[3]);else if(o.showList[r].type==LShape.ARC)(n>o.showList[r].arg[1]-o.showList[r].arg[2]||typeof n==UNDEFINED)&&(n=o.showList[r].arg[1]-o.showList[r].arg[2]),(a<o.showList[r].arg[1]+o.showList[r].arg[2]||typeof a==UNDEFINED)&&(a=o.showList[r].arg[1]+o.showList[r].arg[2]);else if(o.showList[r].type==LShape.VERTICES)for(s=0,e=o.showList[r].arg.length;s<e;s++)(n>(i=o.showList[r].arg[s])[1]||typeof n==UNDEFINED)&&(n=i[1]),(a<i[1]||typeof a==UNDEFINED)&&(a=i[1]);else o.showList[r].type==LShape.LINE?((n>o.showList[r].arg[1]||typeof n==UNDEFINED)&&(n=o.showList[r].arg[1]),(n>o.showList[r].arg[3]||typeof n==UNDEFINED)&&(n=o.showList[r].arg[3]),(a<o.showList[r].arg[1]||typeof a==UNDEFINED)&&(a=o.showList[r].arg[1]),(a<o.showList[r].arg[3]||typeof a==UNDEFINED)&&(a=o.showList[r].arg[3])):o.showList[r].type==LShape.POINT&&((n>o.showList[r].arg[1]||typeof n==UNDEFINED)&&(n=o.showList[r].arg[1]),(a<o.showList[r].arg[1]||typeof a==UNDEFINED)&&(a=o.showList[r].arg[1]));return typeof n==UNDEFINED&&(n=a=0),o.top=n,0<t&&a==n&&(a=n+1),a-n},startX:function(){return this.getWidth(),this.left},startY:function(){return this.getHeight(),this.top}};for(var e in t)o.prototype[e]=t[e];return o}(),LShape=function(){function e(){var t=this;LExtends(t,LInteractiveObject,[]),t.type="LShape",t.graphics=new LGraphics,t.graphics.parent=t}e.POINT="point",e.LINE="line",e.ARC="arc",e.RECT="rect",e.VERTICES="vertices";var t={_ll_show:function(t){this.graphics.ll_show(t)},getWidth:function(t){var e,n,a=this,i=a.graphics.startX(),o=i+a.graphics.getWidth();return t&&a.mask&&(i<(e=a.mask._startX?a.mask._startX():a.mask.startX())&&(i=e),e+(n=a.mask.getWidth())<o&&(o=e+n)),a.ll_left=a.x+i,a.ll_right=a.x+o,(o-i)*a.scaleX},getHeight:function(t){var e,n,a=this,i=a.graphics.startY(),o=i+a.graphics.getHeight();return t&&a.mask&&(i<(e=a.mask._startY?a.mask._startY():a.mask.startY())&&(i=e),e+(n=a.mask.getHeight())<o&&(o=e+n)),a.ll_top=a.y+i,a.ll_bottom=a.y+o,(o-i)*a.scaleY},_startX:function(){return this.getWidth(),this.ll_left},startX:function(){return this._startX()*this.scaleX},_startY:function(){return this.getHeight(),this.ll_top},startY:function(){return this._startY()*this.scaleY},clone:function(){var t=new e;return t.copyProperty(this),t.graphics=this.graphics.clone(),t.graphics.parent=t},ismouseon:function(t,e){var n,a=this,i=!1;return!(!a.visible||null==t)&&(!(a.mask&&(a.mask.parent||(a.mask.parent=a.parent),!a.mask.ismouseon(t,e)))&&(n={x:a.x*e.scaleX+e.x,y:a.y*e.scaleY+e.y,scaleX:e.scaleX*a.scaleX,scaleY:e.scaleY*a.scaleY},a.graphics&&(i=a.graphics.ismouseon(t,n)),i))},die:function(){this.graphics.clear(),this.callParent("die",arguments)}};for(var n in t)e.prototype[n]=t[n];return e}(),LSprite=function(){function o(){var t=this;LExtends(t,LDisplayObjectContainer,[]),t.type="LSprite",t.rotatex,t.rotatey,t.graphics=new LGraphics,(t.graphics.parent=t).box2dBody=null,t.shapes=new Array,t.dragRange=null,t.useCursor=null}var t={setRotate:function(t){this.box2dBody?this.box2dBody.SetAngle(t):this.rotate=t},_rotateReady:function(){var t=this;t.box2dBody&&(typeof t.rotatex==UNDEFINED&&t.getRotateXY(),t.x=t.box2dBody.GetPosition().x*LGlobal.box2d.drawScale-t.parent.x-t.rotatex,t.y=t.box2dBody.GetPosition().y*LGlobal.box2d.drawScale-t.parent.y-t.rotatey,t.rotate=t.box2dBody.GetAngle())},_ll_show:function(t){this.graphics.ll_show(t),LGlobal.show(this.childList,t),this._ll_debugShape(t)},startDrag:function(t){var e=this;e.ll_dragStart||(e.ll_touchPointID=t,e.ll_dragGlobalPoint=e.parent.localToGlobal(new LPoint(e.x,e.y)),e.ll_dragMX=mouseX,e.ll_dragMY=mouseY,e.ll_dragStart=!0,LGlobal.dragList.push(e))},stopDrag:function(){var t,e;for(t=0,e=LGlobal.dragList.length;t<e;t++)if(this.objectIndex==LGlobal.dragList[t].objectIndex){this.ll_dragStart=!1,LGlobal.dragList.splice(t,1);break}},getRotateXY:function(t,e){t&&e||(t=this.getWidth(),e=this.getHeight()),this.rotatex=t/2,this.rotatey=e/2},getWidth:function(t){var e,n,a,i,o,r,s,l=this,u=l.graphics.startX(),c=u+l.graphics.getWidth();for(e=0,n=l.childList.length;e<n;e++)typeof(a=l.childList[e]).visible!=UNDEFINED&&a.visible&&(i=a.x,"function"==typeof a._startX&&(i=a._startX(t)),i<u&&(u=i),c<(o=i+a.getWidth(t))&&(c=o));return t&&l.mask?(u<(r=l.mask._startX?l.mask._startX():l.mask.startX())&&(u=r),r+(s=l.mask.getWidth())<c&&(c=r+s),l.ll_left=u,l.ll_right=c):(l.ll_left=l.x+u,l.ll_right=l.x+c),(c-u)*l.scaleX},getHeight:function(t){var e,n,a,i,o,r,s,l=this,u=l.graphics.startY(),c=u+l.graphics.getHeight();for(e=0,n=l.childList.length;e<n;e++)typeof(a=l.childList[e]).visible!=UNDEFINED&&a.visible&&(i=a.y,"function"==typeof a._startY&&(i=a._startY(t)),i<u&&(u=i),c<(o=i+a.getHeight(t))&&(c=o));return t&&l.mask?(u<(r=l.mask._startY?l.mask._startY():l.mask.startY())&&(u=r),r+(s=l.mask.getHeight())<c&&(c=r+s),l.ll_top=u,l.ll_bottom=c):(l.ll_top=l.y+u,l.ll_bottom=l.y+c),(c-u)*l.scaleY},_startX:function(t){return this.getWidth(t),this.ll_left},startX:function(t){return this._startX(t)*this.scaleX},_startY:function(t){return this.getHeight(t),this.ll_top},startY:function(t){return this._startY(t)*this.scaleY},_ll_loopframe:function(){this.dispatchEvent(LEvent.ENTER_FRAME)},clone:function(){var t,e,n,a,i=new o;for(i.copyProperty(this),i.graphics=this.graphics.clone(),n=(i.graphics.parent=i).childList.length=0,a=this.childList.length;n<a;n++)(t=this.childList[n]).clone&&((e=t.clone()).parent=i).childList.push(e);return i},_mevent:function(t){var e;for(e=0;e<this.mouseList.length;e++){if(this.mouseList[e].type==t)return!0}return!1},ll_dispatchMouseEvent:function(t,e,n,a,i){var o=this;if(o.mouseEnabled)for(s=0;s<o.mouseList.length;s++){var r=o.mouseList[s];r.type==t&&(e.selfX=(a-(o.x*n.scaleX+n.x))/(n.scaleX*o.scaleX),e.selfY=(i-(o.y*n.scaleY+n.y))/(n.scaleY*o.scaleY),e.currentTarget=e.clickTarget=o,e.target||(e.target=o),r.listener(e,o))}},ll_mouseout:function(t,e,n,a,i){var o=this;if(e==LMouseEvent.MOUSE_MOVE&&o.ll_mousein&&(o.ll_mousein=!1,o._mevent(LMouseEvent.MOUSE_OUT)&&o.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OUT,t,n,a,i),o.mouseChildren))for(var r=o.childList.length-1;0<=r;r--)o.childList[r].mouseEvent&&o.childList[r].ll_mouseout&&o.childList[r].ll_mouseout(t,e,n,a,i)},mouseEvent:function(t,e,n){if(!t)return!1;var a,i,o=this,r=t.offsetX,s=t.offsetY;if(!o.visible)return!1;if(null==n&&(n={x:0,y:0,scaleX:1,scaleY:1}),o.ismouseon(t,n)){if(LGlobal.os==OS_PC&&o.useCursor&&e==LMouseEvent.MOUSE_MOVE&&(LGlobal.cursor=o.useCursor),e!=LMouseEvent.MOUSE_MOVE||o.ll_mousein||(o.ll_mousein=!0,o._mevent(LMouseEvent.MOUSE_OVER)&&o.ll_dispatchMouseEvent(LMouseEvent.MOUSE_OVER,t,n,r,s)),o.mouseChildren){for(i={x:o.x*n.scaleX+n.x,y:o.y*n.scaleY+n.y,scaleX:n.scaleX*o.scaleX,scaleY:n.scaleY*o.scaleY},a=o.childList.length-1;0<=a&&(!o.childList[a].mouseEvent||!o.childList[a].mouseEvent(t,e,i)||(t.target=o.childList[a],e==LMouseEvent.MOUSE_MOVE));a--);o._mevent(e)&&o.ll_dispatchMouseEvent(e,t,n,r,s)}return!0}return o.ll_mouseout(t,e,n,r,s),!1},hitTestPoint:function(t,e){var n=this,a=n.shapes;return a&&0!=a.length||(n.getWidth(),n.getHeight(),a=[{type:LShape.RECT,arg:[n.ll_left-n.x,n.ll_top-n.y,n.ll_right-n.ll_left,n.ll_bottom-n.ll_top]}]),n.ismouseonShapes(a,t,e)},hitTestObject:function(t){var e,n,a,i,o,r,s,l,u=this,c=u.shapes,h=t.shapes;for(c&&0!=c.length||(u.getWidth(),u.getHeight(),c=[{type:LShape.RECT,arg:[u.ll_left-u.x,u.ll_top-u.y,u.ll_right-u.ll_left,u.ll_bottom-u.ll_top]}]),h&&0!=h.length||(t.getWidth(),t.getHeight(),h=[{type:LShape.RECT,arg:[t.ll_left-t.x,t.ll_top-t.y,t.ll_right-t.ll_left,t.ll_bottom-t.ll_top]}]),e=u.getRootMatrix(),n=t.getRootMatrix(),a=c.length-1;0<=a;a--)for(i=c[a],l=u._changeShape(i.type,i.arg,e),o=h.length-1;0<=o;o--)if(r=h[o],s=t._changeShape(r.type,r.arg,n),i.type==LShape.VERTICES||i.type==LShape.RECT){if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygon(l,s))return!0}else if(r.type==LShape.ARC&&LGlobal.hitTestPolygonArc(l,s))return!0}else if(r.type==LShape.VERTICES||r.type==LShape.RECT){if(LGlobal.hitTestPolygonArc(s,l))return!0}else if(r.type==LShape.ARC&&Math.sqrt((l[0]-s[0])*(l[0]-s[0])+(l[1]-s[1])*(l[1]-s[1]))<l[2]+s[2])return!0;return!1},addShape:function(t,e){if(!(t==LShape.VERTICES&&e.length<3))return this.shapes.push({type:t,arg:e}),this.shapes},addShapes:function(t){0==this.shapes.length?this.shapes=t:this.shapes=this.shapes.concat(t)},clearShape:function(){this.shapes=[]},_ll_debugShape:function(t){var e,n,a,i,o,r;if(LGlobal.traceDebug&&this.shapes&&0!=this.shapes.length)for(e=0,n=this.shapes.length;e<n;e++){if(a=this.shapes[e],t=t||LGlobal.canvas,i=a.arg,t.beginPath(),a.type==LShape.RECT)t.rect(i[0],i[1],i[2],i[3]);else if(a.type==LShape.ARC)t.arc(i[0],i[1],i[2],0,2*Math.PI);else if(a.type==LShape.VERTICES){for(t.moveTo(i[0][0],i[0][1]),o=1,r=i.length;o<r;o++)t.lineTo(i[o][0],i[o][1]);t.lineTo(i[0][0],i[0][1])}t.closePath(),t.strokeStyle="#00FF00",t.stroke()}},ismouseon:function(t,e){var n=this;if(!n.visible||null==t)return!1;if(n.mask&&(n.mask.parent||(n.mask.parent=n.parent),!n.mask.ismouseon(t,e)))return!1;if(n.shapes&&0<n.shapes.length)return n.ismouseonShapes(n.shapes,t.offsetX,t.offsetY);var a,i=!1,o=n.childList,r={x:n.x*e.scaleX+e.x,y:n.y*e.scaleY+e.y,scaleX:e.scaleX*n.scaleX,scaleY:e.scaleY*n.scaleY};for(a=o.length-1;0<=a;a--)if(o[a].ismouseon&&(i=o[a].ismouseon(t,r)),i){t.target=n.childList[a];break}return i=i||n.graphics.ismouseon(t,r)},die:function(){var t,e,n,a=this;for(a.graphics.clear(),a.removeAllEventListener(),a.stopDrag(),a.box2dBody&&a.clearBody(),t=0,n=(e=a.childList).length;t<n;t++)e[t].die&&e[t].die()}};for(var s in t)o.prototype[s]=t[s];return o}(),LAtlasSprite=function(){function t(t,e,n,a){var i=this;if(LExtends(i,LSprite,[]),i.atlasType=a,i._rotated=n.rotated,a!==LSpriteAtlasType.SIMPLE&&e){if(a===LSpriteAtlasType.SLICED){var o=i._getPanel(t,e,n);i.addChild(o)}}else{i.atlasType=LSpriteAtlasType.SIMPLE;var r=i._getBitmap(t,n);i.addChild(r)}}var e={resize:function(t,e){var n=this;if(n.atlasType===LSpriteAtlasType.SIMPLE){var a=n.getChildAt(0),i=a.getChildAt(0),o=n._rotated?i.bitmapData.getHeight():i.bitmapData.getWidth(),r=n._rotated?i.bitmapData.getWidth():i.bitmapData.getHeight();a.scaleX=t/o,a.scaleY=e/r}else if(n.atlasType===LSpriteAtlasType.SLICED){var s=n.getChildAt(0);n._rotated?(s.resize(e,t),s.y=e):s.resize(t,e)}},_getBitmapData:function(t,e){var n=e.frame[0][0],a=e.frame[0][1],i=e.frame[1][e.rotated?1:0],o=e.frame[1][e.rotated?0:1];return new LBitmapData(t,n,a,i,o)},_getBitmap:function(t,e){var n=this._getBitmapData(t,e),a=new LBitmap(n);a.rotateCenter=!1,e.rotated&&(a.y=n.getWidth(),a.rotate=-90);var i=new LSprite;return i.addChild(a),i},_getPanel:function(t,e,n){var a=this._getBitmapData(t,n),i=a.getWidth(),o=a.getHeight(),r=n.rotated?e.bottom:e.left,s=n.rotated?e.top:e.right,l=n.rotated?e.left:e.top,u=n.rotated?e.right:e.bottom,c=new LPanel(a,i,o,r,i-s,l,o-u);return n.rotated&&(c.y=i,c.rotate=-90),c}};for(var n in e)t.prototype[n]=e[n];return t}(),LButton=function(){function h(t,e,n,a){var i=this;LExtends(i,LSprite,[]),i.type="LButton",i.addChild(t),e?i.addChild(e):e=t,n?i.addChild(n):n=e,a?i.addChild(a):a=t,i.upState=i.bitmap_up=t,i.overState=i.bitmap_over=e,i.downState=n,i.disableState=a,i._ll_down_sx=i.downState.scaleX,i._ll_down_sy=i.downState.scaleY,i.overState.visible=!1,i.downState.visible=!1,i.upState.visible=!0,i.buttonMode=!0,i.staticMode=!1,i.setState(h.STATE_ENABLE),LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.pushButton(i),i.addEventListener(LMouseEvent.MOUSE_DOWN,i.ll_modeDown),i.setCursorEnabled(!0)}h.STATE_DISABLE="disable",h.STATE_ENABLE="enable";var t={setState:function(t){var e=this;if(t==h.STATE_DISABLE)e.upState.visible=!1,e.overState.visible=!1,e.downState.visible=!1,e.disableState.visible=!0,e.mouseEnabled=!1;else{if(t!=h.STATE_ENABLE)return;e.overState.visible=!1,e.downState.visible=!1,e.disableState.visible=!1,e.upState.visible=!0,e.mouseEnabled=!0}e.state=t},ll_mouseout:function(t,e,n,a,i){this.ll_mousein&&((t.clickTarget=this).ll_modeOut(t),this.ll_mousein=!1)},mouseEvent:function(t,e,n){if(!t)return!1;return LGlobal.os==OS_PC&&e==LMouseEvent.MOUSE_MOVE&&this.ll_button_mode&&this.ll_button_mode(t),this.callParent("mouseEvent",arguments)},ll_button_mode:function(t){var e=this;e.visible&&((t.clickTarget=e).hitTestPoint(t.offsetX,t.offsetY)?e.ll_modeOver(t):e.ll_modeOut(t))},ll_modeDown:function(t){var e,n,a,i,o,r,s,l,u,c=t.clickTarget;if(c.buttonMode&&!c.tween){if(c.state==h.STATE_DISABLE)return c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!1,void(c.disableState.visible=!0);c.upState.visible=!1,c.overState.visible=!1,c.downState.visible=!0,c._tweenOver=c.ll_modeOver,u=function(t){var e=t.parent;e&&e.tween&&(delete e.tween,e._tweenOver({clickTarget:e}),delete e._tweenOver)},c.staticMode?c.tween=LTweenLiteTimeline.to(c.downState,.3,{}).to(c.downState,.1,{onComplete:u}):(a=1.1*(e=c.downState.getWidth()),i=1.1*(n=c.downState.getHeight()),s=(o=c.downState.x)+.5*(e-a),l=(r=c.downState.y)+.5*(n-i),c.tween=LTweenLiteTimeline.to(c.downState,.3,{x:s,y:l,scaleX:1.1*c._ll_down_sx,scaleY:1.1*c._ll_down_sy,ease:Quart.easeOut}).to(c.downState,.1,{x:o,y:r,scaleX:c._ll_down_sx,scaleY:c._ll_down_sy,ease:Quart.easeOut,onComplete:u}))}},ll_modeOver:function(t){var e=t.clickTarget;if(e.buttonMode)if(e.tween)e._tweenOver=e.ll_modeOver;else{if(e.state==h.STATE_DISABLE)return e.upState.visible=!1,e.overState.visible=!1,e.downState.visible=!1,void(e.disableState.visible=!0);e.upState.visible=!1,e.downState.visible=!1,e.overState.visible=!0}},ll_modeOut:function(t){var e=t.clickTarget;if(e.buttonMode)if(e.tween)e._tweenOver=e.ll_modeOut;else{if(e.state==h.STATE_DISABLE)return e.upState.visible=!1,e.overState.visible=!1,e.downState.visible=!1,void(e.disableState.visible=!0);e.overState.visible=!1,e.downState.visible=!1,e.upState.visible=!0}},setCursorEnabled:function(t){this.useCursor=t?"pointer":null},clone:function(){return new h(this.upState.clone(),this.overState.clone(),this.downState.clone(),this.disableState.clone())},die:function(){LMouseEventContainer.container[LMouseEvent.MOUSE_MOVE]&&LMouseEventContainer.removeButton(this),this.callParent("die",arguments)}};for(var e in t)h.prototype[e]=t[e];return h}();function LBlendMode(){throw"LBlendMode cannot be instantiated"}LBlendMode.SOURCE_OVER="source-over",LBlendMode.SOURCE_ATOP="source-atop",LBlendMode.SOURCE_IN="source-in",LBlendMode.SOURCE_OUT="source-out",LBlendMode.DESTINATION_OVER="destination-over",LBlendMode.DESTINATION_ATOP="destination-atop",LBlendMode.DESTINATION_IN="destination-in",LBlendMode.DESTINATION_OUT="destination-out",LBlendMode.LIGHTER="lighter",LBlendMode.COPY="copy",LBlendMode.XOR="xor",LBlendMode.NONE=null,LBlendMode.NORMAL=null;var LTextFieldType=function(){throw"LTextFieldType cannot be instantiated"};LTextFieldType.INPUT="input",LTextFieldType.DYNAMIC=null;var LTweenLiteTimeline,LStyleSheet=function(){function t(){LExtends(this,LObject,[]),this.styleIndex=0,this.styleNames={}}return t.prototype.clone=function(){var t=new this.constructor;return t.copyProperty(this),t},t.prototype.setStyle=function(t,e){if(this.styleIndex++,null!==e){var n,a=e.replace(/(^\{)|(\}$)/g,"").split(";");for(e={},n=0;n<a.length;n++){var i;if(a[n])(i=a[n].split(":"))[0]&&(e[i[0]]=i[1])}this.styleNames[t]=e}else this.styleNames[t]&&delete this.styleNames[t]},t.prototype.getStyle=function(t){return this.styleNames[t]},t}(),LTextFormat=function(){function t(t,e,n,a,i,o){var r=this;LExtends(r,LObject,[]),r.font=t||"Arial",r.size=e||15,r.color=n||"#000000",r.bold=a||!1,r.italic=i||!1,r.underline=o||!1}return t.prototype.clone=function(){var t=new this.constructor;return t.copyProperty(this),t},t.prototype.getFontText=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.size+"px "+this.font},t.prototype.setCss=function(t){var e,n=this;for(e in t)switch(e){case"color":n.color=t[e];break;case"font-family":n.font=t[e];break;case"font-size":n.size=t[e];break;case"font-style":n.italic="italic"==t[e];break;case"font-weight":n.bold="bold"==t[e];break;case"text-decoration":n.color="underline"==t[e]}},t}(),LTextField=function(){function L(){var t=this;LExtends(t,LInteractiveObject,[]),t.type="LTextField",t.texttype=null,t.text="",t.htmlText="",t.styleSheet="",t.font="Arial",t.size=15,t.color="#000000",t.weight="normal",t.textAlign="left",t.textBaseline="top",t.heightMode=L.HEIGHT_MODE_BOTTOM,t.stroke=!1,t.lineWidth=1,t.lineColor="#000000",t.width=150,t.height=t.size,t.displayAsPassword=!1,t.wordWrap=!1,t.multiline=!1,t.numLines=1,t.speed=0,t._speedIndex=100}L.HEIGHT_MODE_BOTTOM="bottom",L.HEIGHT_MODE_BASELINE="baseline";var t={_showReady:function(t){var e=this;t.font=e.weight+" "+e.size+"px "+e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.fillStyle=e.color,e.stroke&&(t.strokeStyle=e.lineColor,t.lineWidth=e.lineWidth+1)},ll_getStyleSheet:function(t,e,n,a){var i=this,o=t.clone();if("font"==e)for(var r=0;n&&!(4<r++);){if(!(l=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g.exec(n))||!l[0])break;switch(l[2]){case"face":o.font=l[6];break;case"color":o.color=l[6];break;case"size":o.size=l[6]}n=n.replace(l[0],"").replace(/(^\s*)|(\s*$)|(\n)/g,"")}else if("b"==e)o.bold=!0;else if("u"==e)o.underline=!0;else if("i"==e)o.italic=!0;else if("p"==e&&i.wordWrap)a="\n"+a+"\n";else if(i.styleSheet){var s,l;if("span"==e){if((l=/(([^\s]*?)(\s*)=(\s*)("|')(.*?)\5)*/g.exec(n))&&l[0])switch(l[2]){case"class":s=i.styleSheet.getStyle("."+l[6])}}else i.styleSheet.getStyle(e)&&(s=i.styleSheet.getStyle(e));s&&o.setCss(s)}i.ll_getHtmlText(o,a)},ll_getHtmlText:function(t,e){if(e){var n,a,i,o,r=/<(.*?)(\s*)(.*?)>(.*?)<\/\1>/g.exec(e);if(r&&r[0]){for(0<r.index&&this.ll_htmlTexts.push({textFormat:t.clone(),text:e.substring(0,r.index)}),n=r[1],o=i=r.index;o=e.indexOf("</"+n,o+1),0<(i=e.indexOf("<"+n,i+1))&&i<o;);a=e.substring(e.indexOf(">",r.index)+1,o),this.ll_getStyleSheet(t,n,r[3],a),this.ll_getHtmlText(t,e.substring(o+n.length+3))}else this.ll_htmlTexts.push({textFormat:t.clone(),text:e})}},_createAlignCanvas:function(t){var e=this;e._alignCanvas||(e._alignCanvas=document.createElement("canvas"),e._alignContext=e._alignCanvas.getContext("2d")),e._alignCanvas.width=e.width,e._alignContext.font=t.font,e._alignContext.fillStyle=t.fillStyle,e._alignContext.textBaseline=t.textBaseline,e._alignContext.textAlign="left",e.stroke&&(e._alignContext.strokeStyle=t.strokeStyle,e._alignContext.lineWidth=t.lineWidth)},_ll_show:function(t){var a,e,i,n,o,r,s,l,u,c,h,d,p=this;if(a=LGlobal.enableWebGL?(p._createCanvas(),p._canvas.width=LGlobal.width,p._canvas.height=LGlobal.height,p._showReady(p._context),p._context):t,p.texttype==LTextFieldType.INPUT){if(p.inputBackLayer.ll_show(a),n=p.getRootCoordinate(),LGlobal.wx||LGlobal.inputBox.name!="input"+p.objectIndex||(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((n.y+p.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((n.x+p.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px"),LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex==p.objectIndex)return;0===p.inputBackLayer.graphics.setList.length&&a.rect(0,0,p.inputBackLayer.getWidth(),p.inputBackLayer.getHeight()),a.clip()}if(LGlobal.fpsStatus&&LGlobal.fpsStatus.text++,p.htmlText){p.ll_htmlText==p.htmlText&&(!p.styleSheet||p.ll_style_objectIndex==p.styleSheet.objectIndex&&p.ll_styleIndex!=p.styleSheet.styleIndex)||(h=new LTextFormat,p.ll_htmlTexts=[],p.ll_htmlText=p.htmlText,p.styleSheet&&(p.ll_style_objectIndex=p.styleSheet.objectIndex,p.ll_styleIndex=p.styleSheet.styleIndex),p.ll_getHtmlText(h,p.htmlText)),cx=l=s=o=0,p._ll_height=p.wordHeight||30,L.underlineY||(L.underlineY={alphabetic:0,top:1,bottom:-.2,middle:.4,hanging:.8}),p._createAlignCanvas(a);var f=a;return a=p._alignContext,p.ll_htmlTexts.forEach(function(t){var e=t.textFormat,n=t.text;for(a.font=e.getFontText(),a.fillStyle=e.color,i=0,r=n.length;i<r;i++)(c=/(?:\r\n|\r|\n|¥n)/.exec(n.substr(i,1)))?(g-=0<i?a.measureText(n.substr(i,1)).width:0,s=i+1,cx=o=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),f.drawImage(p._alignCanvas,cx,l*p._ll_height-p._ll_height),p._createAlignCanvas(f),a.font=e.getFontText(),a.fillStyle=e.color,g=0,l++):(u=1.2*a.measureText("O").width,p.stroke&&a.strokeText(n.substr(i,1),o,p._ll_height),a.fillText(n.substr(i,1),o,p._ll_height),e.underline&&(a.beginPath(),d=p._ll_height+u*L.underlineY[p.textBaseline],a.moveTo(o,d),a.lineTo(o+a.measureText(n.substr(i,1)).width,d),a.stroke()),o+=a.measureText(n.substr(i,1)).width,g=o+a.measureText(n.substr(i+1,1)).width,c=/(?:\r\n|\r|\n|¥n)/.exec(n.substr(i+2,1)),p.wordWrap&&g>p.width&&!c&&(s=i+1,cx=o=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),f.drawImage(p._alignCanvas,cx,l*p._ll_height-p._ll_height),p._createAlignCanvas(f),a.font=e.getFontText(),a.fillStyle=e.color,g=0,l++));p.height=(l+1)*p._ll_height}),0<g&&(cx=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),f.drawImage(p._alignCanvas,cx,l*p._ll_height-p._ll_height)),void(LGlobal.enableWebGL&&t.drawImage(p._canvas,0,0))}if(e=p.text,p.displayAsPassword)for(e="",i=0,r=p.text.length;i<r;i++)e+="*";if(p.wordWrap||p.multiline){cx=l=s=o=0;f=a;var v="left"!=p.textAlign;v&&(p._createAlignCanvas(a),f=p._alignContext);var g=0;for(i=0,r=p.text.length;i<r;i++)(c=/(?:\r\n|\r|\n|¥n)/.exec(e.substr(i,1)))?(g=0<i?f.measureText(p.text.substr(s,i-s)).width:0,o=0,s=i+1,v&&(cx=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),a.drawImage(p._alignCanvas,cx,l*p.wordHeight),p._createAlignCanvas(a),g=0),l++):(p.stroke&&f.strokeText(e.substr(i,1),o,v?0:l*p.wordHeight),f.fillText(e.substr(i,1),o,v?0:l*p.wordHeight)),p.numLines=l,o=f.measureText(p.text.substr(s,i+1-s)).width,g=o+(i+1<r?a.measureText(e.substr(i+1,1)).width:0),c=/(?:\r\n|\r|\n|¥n)/.exec(e.substr(i+1,1)),p.wordWrap&&g>p.width&&!c&&(o=0,s=i+1,v&&(cx=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),a.drawImage(p._alignCanvas,cx,l*p.wordHeight),p._createAlignCanvas(a),g=0),l++);v&&0<g&&(cx=0,"center"==p.textAlign?cx=.5*-g:"right"==p.textAlign&&(cx=-g),a.drawImage(p._alignCanvas,cx,l*p.wordHeight)),p.height=(l+1)*p.wordHeight}else p.numLines=1,p.stroke&&a.strokeText(e,0,0,a.measureText(e).width),a.fillText(e,0,0,a.measureText(e).width);LGlobal.enableWebGL&&t.drawImage(p._canvas,0,0),p.windRunning&&p._ll_windRun()},_wordHeight:function(t){var e=this;0<t?e.wordHeight=t:(e.wordWrap=!1,e.wordHeight=e.getHeight()),e.height=0},setMultiline:function(t,e){t&&this._wordHeight(e),this.multiline=t},setWordWrap:function(t,e){t&&this._wordHeight(e),this.wordWrap=t},setType:function(t,e){var n=this;n.texttype!=t&&t==LTextFieldType.INPUT?(null==e||"LSprite"!=e.type?(n.inputBackLayer=new LSprite,n.inputBackLayer.graphics.drawRect(1,"#000000",[0,.4*-n.getHeight(),n.width,1.5*n.getHeight()])):n.inputBackLayer=e,n.inputBackLayer.parent=n,LMouseEventContainer.container[LMouseEvent.MOUSE_DOWN]&&LMouseEventContainer.pushInputBox(n)):(n.inputBackLayer=null,LMouseEventContainer.removeInputBox(n)),n.texttype=t},ismouseon:function(t,e){var n=this;return!!t&&(!!n.visible&&(e=e||{x:0,y:0,scaleX:1,scaleY:1},!(n.mask&&(n.mask.parent||(n.mask.parent=n.parent),!n.mask.ismouseon(t,e)))&&(n.inputBackLayer?n.inputBackLayer.ismouseon(t,{x:n.x*e.scaleX+e.x,y:n.y*e.scaleY+e.y,scaleX:e.scaleX*n.scaleX,scaleY:e.scaleY*n.scaleY}):n.ismouseonShapes([{type:LShape.RECT,arg:[0,0,n._getWidth(),n._getHeight()]}],t.offsetX,t.offsetY))))},clone:function(){var t=new this.constructor;return t.copyProperty(this),t.texttype=null,this.texttype==LTextFieldType.INPUT&&t.setType(LTextFieldType.INPUT),t},mouseEvent:function(t,e,n){null!=this.inputBackLayer&&e==LMouseEvent.MOUSE_DOWN&&this.ismouseon(t,n)&&this.focus()},_wx_ll_getValue:function(t){LGlobal.inputTextField.text=t,wx.offKeyboardInput(LGlobal.inputTextField._ll_input),wx.offKeyboardComplete(this._ll_getValue),LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),LGlobal.inputTextField=null},_ll_getValue:function(t){LGlobal.inputTextField&&(LGlobal.wx?LGlobal.inputTextField._wx_ll_getValue(t.value):(LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LEvent.removeEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),LGlobal.inputBox.style.display=NONE,typeof LGlobal.inputTextField.preventDefault!=UNDEFINED&&(LGlobal.preventDefault=LGlobal.inputTextField.preventDefault),LGlobal.inputTextField.dispatchEvent(LFocusEvent.FOCUS_OUT),"function"==typeof LGlobal.inputTextBox.blur&&LGlobal.inputTextBox.blur(),LGlobal.inputTextField=null))},updateInput:function(){LGlobal.wx?this._wxUpdateInput():this.texttype==LTextFieldType.INPUT&&LGlobal.inputTextField.objectIndex==this.objectIndex&&(LGlobal.inputTextBox.value=LGlobal.inputTextField.text)},_wxUpdateInput:function(){var t=this;wx.hideKeyboard({complete:function(){t.focus()}})},_wx_ll_input:function(t){if(LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)){var e=new LEvent(LTextEvent.TEXT_INPUT);e.keyCode=t,LGlobal.inputTextField.dispatchEvent(e)}},_ll_input:function(t){if(LGlobal.wx)LGlobal.inputTextField._wx_ll_input(t);else{var e=new LEvent(LTextEvent.TEXT_INPUT);e.keyCode=t.keyCode,LGlobal.inputTextField.text=LGlobal.inputTextBox.value,LGlobal.inputTextField.hasEventListener(LTextEvent.TEXT_INPUT)?t.returnValue=LGlobal.inputTextField.dispatchEvent(e):t.returnValue=!0}},focus:function(){var t,e,n=this;n.parent&&n.texttype==LTextFieldType.INPUT&&(LGlobal.inputTextField&&LGlobal.inputTextField.objectIndex!=n.objectIndex&&n._ll_getValue(),n.dispatchEvent(LFocusEvent.FOCUS_IN),LGlobal.wx?n._wxFocus():(t=n.getAbsoluteScale(),LGlobal.inputBox.style.display="",LGlobal.inputBox.name="input"+n.objectIndex,LGlobal.inputTextField=n,LGlobal.inputTextareaBoxObj.style.display=NONE,LGlobal.inputTextBoxObj.style.display=NONE,LGlobal.passwordBoxObj.style.display=NONE,n.displayAsPassword?LGlobal.inputTextBox=LGlobal.passwordBoxObj:n.multiline?LGlobal.inputTextBox=LGlobal.inputTextareaBoxObj:LGlobal.inputTextBox=LGlobal.inputTextBoxObj,e=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,sy=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height,LGlobal.inputTextBox.style.display="",LGlobal.inputTextBox.value=n.text,LGlobal.inputTextBox.style.height=n.inputBackLayer.getHeight()*t.scaleY*n.scaleY*sy+"px",LGlobal.inputTextBox.style.width=n.inputBackLayer.getWidth()*t.scaleX*n.scaleX*e+"px",LGlobal.inputTextBox.style.color=n.color,LGlobal.inputTextBox.style.fontSize=(n.size*parseFloat(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>0)+"px",LGlobal.inputTextBox.style.fontFamily=n.font,LEvent.addEventListener(LGlobal.inputTextBox,LKeyboardEvent.KEY_DOWN,LGlobal.inputTextField._ll_input),n.texttype==LTextFieldType.INPUT&&(rc=n.getRootCoordinate(),LGlobal.inputBox.name=="input"+n.objectIndex&&(LGlobal.inputBox.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+((rc.y+n.inputBackLayer.startY())*parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height>>>0)+"px",LGlobal.inputBox.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+((rc.x+n.inputBackLayer.startX())*parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width>>>0)+"px")),n.preventDefault=LGlobal.preventDefault,LGlobal.preventDefault=!1,LGlobal.inputTextBox.focus()))},_wxFocus:function(){LGlobal.inputTextField=this,wx.showKeyboard({defaultValue:this.text,maxLength:20,multiple:!1,confirmHold:!1,confirmType:"done"}),wx.onKeyboardInput(this._ll_input),wx.onKeyboardComplete(this._ll_getValue)},_getWidth:function(){var t=this;if(t.wordWrap)return t.width;LGlobal.enableWebGL&&this._createCanvas();var e=LGlobal.enableWebGL?t._context:LGlobal.canvas;return e.font=t.size+"px "+t.font,e.measureText(t.text).width},getWidth:function(t){var e,n,a,i=this;return e=i._getWidth()*i.scaleX,t&&i.mask?e<(n=i.mask._startX?i.mask._startX():i.mask.startX())?0:e<n+(a=i.mask.getWidth())?e-n:a:e},_startX:function(t){var e=this;if("left"==e.textAlign)return e.x;var n=e.getWidth(t);return e.x+("right"==e.textAlign?-n:.5*-n)},_getHeight:function(){var t=this;LGlobal.enableWebGL&&this._createCanvas();var e,n=LGlobal.enableWebGL?t._context:LGlobal.canvas;return t.wordWrap?(n.font=t.weight+" "+t.size+"px "+t.font,0==t.height&&(t._createCanvas(),t._context.font=t.weight+" "+t.size+"px "+t.font,t._ll_show(t._context)),t.height):(n.font=t.weight+" "+t.size+"px "+t.font,e=1.2*n.measureText("O").width,t.heightMode==L.HEIGHT_MODE_BASELINE&&(e*=1.2),e)},getHeight:function(t){var e,n,a,i=this;return e=i._getHeight()*i.scaleY,t&&i.mask?e<(n=i.mask._startY?i.mask._startY():i.mask.startY())?0:e<n+(a=i.mask.getHeight())?e-n:a:e},wind:function(t){var e=this;e.wind_over_function=t,e.windRunning=!0,e._ll_wind_text=e.text,e.text="",e._ll_wind_length=0},_ll_windRun:function(){var t=this;if(!(t._speedIndex++<t.speed)){if(t._speedIndex=0,t._ll_wind_length>t._ll_wind_text.length)return t.windRunning=!1,t.wind_over_function&&t.wind_over_function(),void t.dispatchEvent(new LEvent(LTextEvent.WIND_COMPLETE));t.text=t._ll_wind_text.substring(0,t._ll_wind_length),t._ll_wind_length++}},windComplete:function(){var t=this;t._speedIndex=t.speed,t.text=t._ll_wind_text,t._ll_wind_length=t._ll_wind_text.length+1,t._ll_windRun()},die:function(){LMouseEventContainer.removeInputBox(this)}};for(var e in t)L.prototype[e]=t[e];return L}(),LBitmap=function(){function e(t){var e=this;LExtends(e,LDisplayObject,[]),e.type="LBitmap",e.rotateCenter=!0,e.bitmapData=t,e.bitmapData&&(e.width=e.bitmapData.width,e.height=e.bitmapData.height)}var t={_canShow:function(){return this.visible&&this.bitmapData},_rotateReady:function(){var t=this;0!=t.rotate&&t.rotateCenter?(t.rotatex=.5*t.getWidth(),t.rotatey=.5*t.getHeight()):t.rotatex=t.rotatey=0},_coordinate:function(t){},_ll_show:function(t){this.ll_draw(t)},ll_draw:function(t){var e=this;LGlobal.fpsStatus&&LGlobal.fpsStatus.bitmapData++,t.drawImage(e.bitmapData.image,e.bitmapData.x,e.bitmapData.y,e.bitmapData.width,e.bitmapData.height,e.x,e.y,e.bitmapData.width,e.bitmapData.height)},clone:function(){var t=new e(this.bitmapData.clone());return t.copyProperty(this),t.rotateCenter=this.rotateCenter,t},ismouseon:function(t,e){var n=this;return!!t&&(!(!n.visible||!n.bitmapData)&&(!(n.mask&&(n.mask.parent||(n.mask.parent=n.parent),!n.mask.ismouseon(t,e)))&&n.ismouseonShapes([{type:LShape.RECT,arg:[0,0,n.bitmapData.width,n.bitmapData.height]}],t.offsetX,t.offsetY)))},getWidth:function(t){var e,n,a,i=this;return e=null!=i.bitmapData?i.bitmapData.width*(0<i.scaleX?i.scaleX:-i.scaleX):0,t&&i.mask?e<(n=i.mask._startX?i.mask._startX():i.mask.startX())?0:e<n+(a=i.mask.getWidth())?e-n:a:e},getHeight:function(t){var e,n,a,i=this;return e=null!=i.bitmapData?i.bitmapData.height*(0<i.scaleY?i.scaleY:-i.scaleY):0,t&&i.mask?e<(n=i.mask._startY?i.mask._startY():i.mask.startY())?0:e<n+(a=i.mask.getHeight())?e-n:a:e},startX:function(){return this.x},startY:function(){return this.y},die:function(){}};for(var n in t)e.prototype[n]=t[n];return e}(),LBitmapData=function(){function f(t,e,n,a,i,o){var r=this;if(LExtends(r,LObject,[]),r.type="LBitmapData",typeof o==UNDEFINED&&(o=f.DATA_IMAGE),r.oncomplete=null,r._locked=!1,r._setPixel=!1,r.x=null==e?0:e,r.y=null==n?0:n,r.width=0,r.height=0,r.dataType=null,t&&"object"==typeof t)r.image=t,r.dataType=f.DATA_IMAGE,r.width=null==a?r.image.width:a,r.height=null==i?r.image.height:i,r._setDataType(o);else{if(r._createCanvas(),r.dataType=f.DATA_CANVAS,r._canvas.width=r.width=a||1,r._canvas.height=r.height=i||1,"string"==typeof t)r._context.fillStyle=t,r._context.fillRect(0,0,r.width,r.height);else if("number"==typeof t){for(var s=r._context.createImageData(r.width,r.height),l=0;l<s.data.length;l+=4)s.data[l+0]=t>>16&255,s.data[l+1]=t>>8&255,s.data[l+2]=255&t,s.data[l+3]=255;r._context.putImageData(s,0,0)}r.image=r._canvas,o==f.DATA_IMAGE&&r._setDataType(o)}r.resize()}f.DATA_IMAGE="data_image",f.DATA_CANVAS="data_canvas";var t={_setDataType:function(t){var e=this;e.dataType!=t&&(t==f.DATA_CANVAS?(e._createCanvas(),e._canvas.width=e.image.width,e._canvas.height=e.image.height,e._context.clearRect(0,0,e._canvas.width,e._canvas.height),e._context.drawImage(e.image,0,0),e.image=e._canvas):t==f.DATA_IMAGE&&(e.image=new Image,e.image.width=e._canvas.width,e.image.height=e._canvas.height,e.image.src=e._canvas.toDataURL()),e.dataType=t)},_createCanvas:function(){this._canvas||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"))},clear:function(t){var e=this;e._createCanvas(),t?e._context.clearRect(t.x,t.y,t.width,t.height):e._canvas.width=e.image.width,e.dataType==f.DATA_IMAGE&&(e.image.src=e._canvas.toDataURL())},setProperties:function(t,e,n,a){var i=this;i.x=t,i.y=e,i.width=n,i.height=a,i.resize()},setCoordinate:function(t,e){this.x=t,this.y=e,this.resize()},clone:function(){var t=this;return new f(t.image,t.x,t.y,t.width,t.height,t.dataType)},_ready:function(){var t=this;t._dataType=t.dataType,t._setDataType(f.DATA_CANVAS),t._data=t._context.getImageData(t.x,t.y,t.width,t.height)},_update:function(){var t=this;t._context.putImageData(t._data,t.x,t.y,0,0,t.width,t.height),t._setDataType(t._dataType),t._data=null},applyFilter:function(t,e,n,a,i){var o=this._context.getImageData(this.x+e.x,this.y+e.y,e.width,e.height),r=a.filter(o,e.width,i);this.putPixels(new LRectangle(n.x,n.y,e.width,e.height),r)},getPixel:function(t,e,n){var a,i,o=this;return t>>=0,e>>=0,o._locked||o._ready(),a=4*o.width*e+4*t,i=o._data.data,o._locked||o._update(),"number"==n?i[a]<<16|i[1+a]<<8|i[2+a]:[i[a],i[1+a],i[2+a],i[3+a]]},setPixel:function(t,e,n){var a=this;t>>=0,e>>=0,a._locked||a._ready();var i=a._data,o=4*a.width*e+4*t;"object"==typeof n?(i.data[0+o]=n[0],i.data[1+o]=n[1],i.data[2+o]=n[2],i.data[3+o]=n[3]):("string"==typeof n&&(n=parseInt(n.replace("#","0x"))),i.data[0+o]=n>>16&255,i.data[1+o]=n>>8&255,i.data[2+o]=255&n,i.data[3+o]=255),a._locked||a._update()},getPixels:function(t){var e,n=this;return n._locked||n._ready(),e=n._context.getImageData(n.x+t.x,n.y+t.y,t.width,t.height),n._locked||n._update(),e},setPixels:function(t,e){var n,a,i,o,r,s,l=this;if(l._locked||l._ready(),i=l._data,"object"==typeof e)for(o=l._canvas.width,r=t.x;r<t.right;r++)for(s=t.y;s<t.bottom;s++)n=4*o*(l.y+s)+4*(l.x+r),a=4*e.width*(s-t.y)+4*(r-t.x),i.data[n+0]=e.data[0+a],i.data[n+1]=e.data[1+a],i.data[n+2]=e.data[2+a],i.data[n+3]=e.data[3+a];else for("string"==typeof e&&(e=parseInt(e.replace("#","0x"))),e=[e>>16&255,e>>8&255,255&e],o=l._canvas.width,r=t.x;r<t.right;r++)for(s=t.y;s<t.bottom;s++)n=4*o*(l.y+s)+4*(l.x+r),i.data[n+0]=e[0],i.data[n+1]=e[1],i.data[n+2]=e[2],i.data[n+3]=255;l._locked||l._update()},putPixels:function(t,e){this.dataType==f.DATA_CANVAS&&"object"==typeof e&&this._context.putImageData(e,this.x+t.x,this.y+t.y,0,0,t.width,t.height)},lock:function(){this._locked=!0,this._ready()},unlock:function(){this._locked=!1,this._update()},draw:function(t,e,n,a,i){var o,r,s,l,u,c=this,h=t,d=!1,p=c.dataType;c._setDataType(f.DATA_CANVAS),(e||n||a||i)&&(c._context.save(),d=!0),i&&(h instanceof f?(r=h.x,s=h.y):r=s=0,h=new f(h.getDataCanvas(),r+i.x,s+i.y,i.width,i.height,f.DATA_CANVAS)),l=h.getWidth()>>>0,u=h.getHeight()>>>0,0!=l&&0!=u?(o=h.getDataCanvas(),n&&(h.colorTransform(new LRectangle(0,0,l,u),n),o=h.image),e&&c._context.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty),a&&(c._context.globalCompositeOperation=a),c._context.drawImage(o,h.x,h.y,l,u,0,0,l,u),d&&c._context.restore(),c._setDataType(p),c.resize()):c._setDataType(p)},getDataCanvas:function(){var t=this.dataType;return this._setDataType(f.DATA_CANVAS),this._setDataType(t),this._canvas},getWidth:function(){return this.width},getHeight:function(){return this.height},resize:function(){var t=this,e=t.image.width-t.x,n=t.image.height-t.y;t.width=t.width<e?t.width:e,t.height=t.height<n?t.height:n},colorTransform:function(t,e){var n=this;if(n.dataType==f.DATA_CANVAS){t.x,t.y,t.width,t.height;for(var a=n._context.getImageData(n.x+t.x,n.y+t.y,t.width,t.height),i=a.data,o=0,r=i.length;o<r;o+=4){var s=o+1,l=o+2,u=o+3;i[o]=i[o]*e.redMultiplier+e.redOffset,i[s]=i[s]*e.greenMultiplier+e.greenOffset,i[l]=i[l]*e.blueMultiplier+e.blueOffset,i[u]=i[u]*e.alphaMultiplier+e.alphaOffset}n._context.putImageData(a,n.x+t.x,n.y+t.y,0,0,t.width,t.height)}},copyPixels:function(t,e,n){var a,i,o,r,s=t;this.dataType==f.DATA_CANVAS&&(a=s.x,i=s.y,o=s.width,r=s.height,s.setProperties(e.x+s.x,e.y+s.y,e.width,e.height),this._context.drawImage(s.image,s.x,s.y,s.width,s.height,n.x,n.y,s.width,s.height),s.x=a,s.y=i,s.width=o,s.height=r)}};for(var e in t)f.prototype[e]=t[e];return f}(),LBitmapFilter=function(){function t(){LExtends(this,LObject,[]),this.type="LBitmapFilter"}return t.prototype.ll_show=function(t,e){var n=this;if(!n.cacheMaking){e=e||LGlobal.canvas;var a,i=t;a="LBitmap"==i.constructor.name?i.bitmapData:(i._ll_cacheAsBitmap||(n.cacheMaking=!0,i.cacheAsBitmap(!0),n.cacheMaking=!1),i._ll_cacheAsBitmap.bitmapData),n.bitmapDataIndex!==a.objectIndex&&(n.bitmapDataIndex=a.objectIndex,a.applyFilter(a,new LRectangle(0,0,a.width,a.height),new LPoint(0,0),n,e))}},t}(),LDropShadowFilter=function(){function t(t,e,n,a){var i=this;LExtends(i,LBitmapFilter,[]),i.type="LDropShadowFilter",i.distance=t||0,i.angle=e||0,i.shadowColor=n||"#000000",i.shadowBlur=a||20,i.setShadowOffset()}var e={setShadowOffset:function(){var t=this,e=t.angle*Math.PI/180;t.shadowOffsetX=t.distance*Math.cos(e),t.shadowOffsetY=t.distance*Math.sin(e)},ll_show:function(t,e){(e=e||LGlobal.canvas).shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY},setDistance:function(t){this.distance=t,this.setShadowOffset()},setAngle:function(t){this.angle=t,this.setShadowOffset()},setColor:function(t){this.shadowColor=t},setBlur:function(t){this.shadowBlur=t}};for(var n in e)t.prototype[n]=e[n];return t}(),LColorMatrixFilter=function(){function t(t){LExtends(this,LBitmapFilter,[]),this.type="LColorMatrixFilter",this.matrix=t}var e={filter:function(t,e,n){n=LGlobal.enableWebGL?LGlobal._context:n||LGlobal.canvas;for(var a=t.data,i=n.createImageData(t),o=i.data,r=o.length,s=this.matrix,l=0;l<r;l+=4)o[l]=s[0]*a[l]+s[1]*a[l+1]+s[2]*a[l+2]+s[3]*a[l+3]+s[4],o[l+1]=s[5]*a[l]+s[6]*a[l+1]+s[7]*a[l+2]+s[8]*a[l+3]+s[9],o[l+2]=s[10]*a[l]+s[11]*a[l+1]+s[12]*a[l+2]+s[13]*a[l+3]+s[14],o[l+3]=s[15]*a[l]+s[16]*a[l+1]+s[17]*a[l+2]+s[18]*a[l+3]+s[19];return i}};for(var n in e)t.prototype[n]=e[n];return t}(),LConvolutionFilter=function(){function t(t,e,n,a,i,o,r,s,l){var u=this;LExtends(u,LBitmapFilter,[]),u.type="LConvolutionFilter",u.matrixX=t||0,u.matrixY=e||0,u.matrix=n,a=a||(n.reduce(function(t,e){return t+e})||1),u.divisor=a,u.bias=i||0}var e={filter:function(t,e,n){n=LGlobal.enableWebGL?LGlobal._context:n||LGlobal.canvas;for(var a=t.data,i=n.createImageData(t),o=i.data,r=o.length,s=0;s<r;s++)if((s+1)%4!=0){res=0;for(var l=[a[s-4*e-4]||a[s],a[s-4*e]||a[s],a[s-4*e+4]||a[s],a[s-4]||a[s],a[s],a[s+4]||a[s],a[s+4*e-4]||a[s],a[s+4*e]||a[s],a[s+4*e+4]||a[s]],u=0;u<9;u++)res+=l[u]*this.matrix[u];res/=this.divisor,this.bias&&(res+=this.bias),o[s]=res}else o[s]=a[s];return i}};for(var n in e)t.prototype[n]=e[n];return t}(),LAnimation=function(){function t(t,e,n){var a=this;LExtends(a,LSprite,[]),a.type="LAnimation",a.rowIndex=0,a.colIndex=0,a._ll_stepIndex=0,a._ll_stepArray=[],a.mode=1,a.isMirror=!1,Array.isArray(e)?a.bitmapList=e:a.bitmapList=[e],a.bitmap=new LBitmap(a.bitmapList[0]),a.imageArray=n,a.addChild(a.bitmap),null!=t&&t.addChild(a),a.onframe(),a.colIndex=0}var e={setAction:function(t,e,n,a){var i=this,o=!1;null!=t&&0<=t&&t<i.imageArray.length&&(i.rowIndex=t,o=!0),null!=e&&0<=e&&e<i.imageArray[t].length&&(i.colIndex=e,o=!0),null!=n&&(i.mode=n,o=!0),null!=a&&(i.isMirror=a,i.isMirror?(i.bitmap.x=i.bitmap.getWidth(),i.bitmap.scaleX=-1*Math.abs(i.bitmap.scaleX)):(i.bitmap.x=0,i.bitmap.scaleX=Math.abs(i.bitmap.scaleX)),o=!0),o&&(i._ll_stepIndex=0,i._send_complete=!1)},getAction:function(){return[this.rowIndex,this.colIndex,this.mode,this.isMirror]},onframe:function(){var t,e=this,n=0,a=null;if(e.colIndex>=e.imageArray[e.rowIndex].length&&(e.colIndex=0),t=e.imageArray[e.rowIndex][e.colIndex],a=e._ll_stepArray[e.rowIndex]&&e._ll_stepArray[e.rowIndex][e.colIndex]?e._ll_stepArray[e.rowIndex][e.colIndex]:0,0==e._ll_stepIndex){if("number"==typeof t.dataIndex&&Array.isArray(e.bitmapList)&&t.dataIndex<e.bitmapList.length&&(e.bitmap.bitmapData=e.bitmapList[t.dataIndex]),t.script)for(i=0;i<t.script.length;i++)obj=t.script[i],l=e.ll_labelList[obj.name],l&&l.rowIndex==e.rowIndex&&l.colIndex==e.colIndex&&l.mode==e.mode&&l.isMirror==(-1==e.bitmap.scaleX)&&obj.func(e,obj.params);typeof t.width!=UNDEFINED&&typeof t.height!=UNDEFINED?e.bitmap.bitmapData.setProperties(t.x,t.y,t.width,t.height):e.bitmap.bitmapData.setCoordinate(t.x,t.y),typeof t.sx!=UNDEFINED&&(n=t.sx),typeof t.sy!=UNDEFINED&&(e.bitmap.y=t.sy),typeof t.mirror!=UNDEFINED&&(e.bitmap.rotateCenter=!1,e.bitmap.scaleX=t.mirror?-1:1),e.bitmap.x=n+(1==e.bitmap.scaleX?0:e.bitmap.getWidth())}e._ll_stepIndex++<a||(e._ll_stepIndex=0,e.colIndex+=e.mode,(e.colIndex>=e.imageArray[e.rowIndex].length||e.colIndex<0)&&(e.colIndex=0<e.mode?0:e.imageArray[e.rowIndex].length-1,"LAnimationTimeline"==e.constructor.name?e._send_complete=!0:e.dispatchEvent(LEvent.COMPLETE)))},clone:function(){var t=this,e=new t.constructor(null,t.bitmapList,t.imageArray.slice(0));return e.copyProperty(t),e.childList.length=0,e.bitmap=t.bitmap.clone(),e.addChild(e.bitmap),e}};for(var n in e)t.prototype[n]=e[n];return t}(),LAnimationTimeline=function(){function t(t,e){var n=this;LExtends(n,LAnimation,[null,t,e]),n.type="LAnimationTimeline",n.speed=0,n._speedIndex=0,n.ll_labelList={};for(var a,i,o,r=0;r<e.length;r++)for(a=e[r],i=0;i<a.length;i++)(o=a[i]).label&&n.setLabel(o.label,r,i,1,!!o.isMirror);n.addEventListener(LEvent.ENTER_FRAME,n._ll_onframe)}var e={clone:function(){var t,e,n=this,a=new n.constructor(n.bitmapList,n.imageArray.slice(0));for(t in a.copyProperty(n),a.childList.length=0,a.bitmap=n.bitmap.clone(),a.addChild(a.bitmap),n.ll_labelList)e=n.ll_labelList[t],a.ll_labelList[t]={rowIndex:e.rowIndex,colIndex:e.colIndex,mode:e.mode,isMirror:e.isMirror};return a},setFrameSpeedAt:function(t,e,n){this._ll_stepArray[t]||(this._ll_stepArray[t]=[]),this._ll_stepArray[t][e]=n},_ll_onframe:function(t){var e=t.target;e._ll_stop||e._speedIndex++<e.speed||e._send_complete&&(e.dispatchEvent(LEvent.COMPLETE),e._send_complete=!1,e._ll_stop)||(e._speedIndex=0,e.onframe())},setLabel:function(t,e,n,a,i){this.ll_labelList[t]={rowIndex:e,colIndex:n,mode:typeof a==UNDEFINED?1:a,isMirror:typeof i!=UNDEFINED&&i}},play:function(){this._ll_stop=!1},stop:function(){this._ll_stop=!0},gotoAndPlay:function(t){var e=this.ll_labelList[t];this.setAction(e.rowIndex,e.colIndex,e.mode,e.isMirror),this.play(),this.onframe()},gotoAndStop:function(t){var e=this.ll_labelList[t];this.setAction(e.rowIndex,e.colIndex,e.mode,e.isMirror),this.stop(),this.onframe()},addFrameScript:function(t,e,n){var a=this.ll_labelList[t],i=this.imageArray[a.rowIndex][a.colIndex];i.script||(i.script=[]),i.script.push({func:e,params:n,name:t})},removeFrameScript:function(t){var e,n,a=this.ll_labelList[t];if(e=this.imageArray[a.rowIndex][a.colIndex].script)for(n=0;n<e.length;n++)if(e[n].name==t){e.splice(n,1);break}}};for(var n in e)t.prototype[n]=e[n];return t}(),LSpriteAtlasType={SIMPLE:"simple",SLICED:"sliced"},LAtlas=function(){function u(){LExtends(s,LEventDispatcher,[])}var t={destroy:function(){delete u._container[name]},load:function(e,n){var a=this,t=[{name:e+"/"+n+".png",path:this.url(e+"/"+n+".png")},{name:e+"/"+n+".plist",path:this.url(e+"/"+n+".plist"+(LGlobal.wx?".meta":"")),type:"text"},{name:e+"/"+n+".json",path:this.url(e+"/"+n+".json"),type:"text"}];LLoadManage.load(t,null,function(t){a._loadComplete(t,e,n)})},url:function(t){return LGlobal.traceDebug?t+(0<=t.indexOf("?")?"&":"?")+"t="+Date.now():t},_loadComplete:function(t,e,n){var a="resources/",i=e.indexOf(a);this._atlasKey=e.substring(i+a.length)+"/"+n,u._container[this._atlasKey]=this;var o=t[e+"/"+n+".png"],r=t[e+"/"+n+".plist"],s=JSON.parse(t[e+"/"+n+".json"]);this.set(r,o,s);var l=new LEvent(LEvent.COMPLETE);l.currentTarget=this,(l.target=this).dispatchEvent(l)},set:function(t,e,n){this._texture=e,this._setting=n,this._initData(t)},_initData:function(t){if(LGlobal.wx)this._textureData=JSON.parse(t);else{var e=new DOMParser;this.xmlDom=e.parseFromString(t,"text/xml");for(var n,a=this.xmlDom.querySelector("plist").querySelector("dict").children,i=0;i<a.length;i++){var o=a[i];if("key"===o.tagName&&"frames"===o.textContent){n=a[i+1].children;break}}this._textureData={};for(i=0;i<n.length;i+=2){var r=n[i].textContent.replace(".png",""),s=n[i+1],l=this._getTextureData(s.children);this._textureData[r]=l}}},getSprite:function(t,e,n,a){var i=this._textureData[t],o=new LAtlasSprite(this._texture,this._setting[t],i,e);return n&&a&&o.resize(n,a),o},_getTextureData:function(t){for(var e={},n=0;n<t.length;n+=2){var a=t[n].textContent,i=t[n+1],o=JSON.parse("string"===i.tagName?i.textContent.replace(/\{/g,"[").replace(/\}/g,"]"):i.tagName);e[a]=o}return e}};for(var e in t)u.prototype[e]=t[e];return u.TYPE_PLIST="type_plist",u._container={},u.get=function(t){return u._container[t]||new u},u}(),LLoadManage=function(){function o(){LExtends(this,LEventDispatcher,[]),this.llname="ll.file.",this.llload="ll.load."}var t={load:function(t,e,n){var a=this;if(!t||0==t.length){var i=new LEvent(LEvent.COMPLETE);return i.currentTarget=a,i.target={},void a.dispatchEvent(i)}a.list=t,a.onupdate=e,a.oncomplete=n,(a.loader=a).index=0,a.loadIndex=0,a.result=[],a.lresult=[],a.loadInit()},loadInit:function(){var t=this;t.index>=t.list.length||(t.loadIndex=0,t.loadStart(),t.reloadtime=setTimeout(t.loadInit.bind(t),1e4))},_addEvent:function(t,e){t.parent=this,t.name=e,t.addEventListener(LEvent.PROGRESS,this._loadProgress),t.addEventListener(LEvent.ERROR,this._loadError),t.addEventListener(LEvent.COMPLETE,this._loadComplete)},loadStart:function(){var e,t,n=this;n.loadIndex>=n.list.length||(typeof(e=n.list[n.loadIndex]).progress==UNDEFINED&&(e.progress=0),e.name||(e.name=n.llname+n.loadIndex),n.lresult[n.llload+e.name]||(e.type||("txt"==(t=getExtension(e.path))?e.type=LURLLoader.TYPE_TEXT:"js"==t?e.type=LURLLoader.TYPE_JS:0<=new Array("mp3","ogg","wav","m4a").indexOf(t)&&(e.type=LSound.TYPE_SOUND)),e.type==LURLLoader.TYPE_TEXT||e.type==LURLLoader.TYPE_JS?(n.loader=new LURLLoader,n._addEvent(n.loader,e.name),n.loader.load(n.url(e.path),e.type)):e.type==LSound.TYPE_SOUND?LGlobal.wx?(n.loader=new LEventDispatcher,setTimeout(function(){n._addEvent(n.loader,e.name);var t=new LEvent(LEvent.COMPLETE);t.currentTarget=n.loader,t.target=e.path,n.loader.dispatchEvent(t)})):LSound.webAudioEnabled?(n.loader=new LSound,n._addEvent(n.loader,e.name),n.loader.load(e.path)):(n.loader=new LSound,LSound.addWait(n.loader,e.path),n._waitLoadSound(n.loader,e)):e.type===LAtlas.TYPE_PLIST?(n.loader=new LAtlas,n._addEvent(n.loader,e.name)):e.type==LFontLoader.TYPE_FONT?(n.loader=new LFontLoader,n._addEvent(n.loader,e.name),n.loader.load(e.path,e.name)):(n.loader=new LLoader,n._addEvent(n.loader,e.name),n.loader.load(n.url(e.path),LLoader.TYPE_BITMAPDATE,e.useXHR)),n.loader._loadIndex=n.loadIndex),n.loadIndex++,n.loadStart())},_waitLoadSound:function(e,n){var a=this;setTimeout(function(){a._addEvent(e,n.name);var t=new LEvent(LEvent.COMPLETE);t.currentTarget=e,t.target=n.path,e.dispatchEvent(t)})},_loadProgress:function(t){var e=t.currentTarget,n=e.parent;n.list[e._loadIndex].progress=t.loaded/t.total;for(var a=0,i=0,o=n.list.length;i<o;i++)a+=n.list[i].progress;var r=new LEvent(LEvent.PROGRESS);r.currentTarget=n,r.target=t.currentTarget,r.loaded=a,r.total=n.list.length,r.responseURL=t.responseURL,n.dispatchEvent(r)},_loadError:function(t){var e=t.currentTarget,n=e.parent;delete e.parent,e.removeEventListener(LEvent.ERROR,n._loadError);var a=new LEvent(LEvent.ERROR);a.currentTarget=n,a.target=t.target,a.responseURL=t.responseURL,n.dispatchEvent(a)},_loadComplete:function(t){var e=t.currentTarget.parent;if(e){if(t&&t.currentTarget.name){if(t.currentTarget.removeEventListener(LEvent.COMPLETE,e._loadComplete),0<=t.currentTarget.name.indexOf(e.llname)&&(t.target=1),e.lresult[e.llload+t.currentTarget.name])return;e.result[t.currentTarget.name]=t.target,e.lresult[e.llload+t.currentTarget.name]=1}if(e.index++,t.loaded=t.total=1,e._loadProgress(t),delete t.currentTarget.parent,e.index>=e.list.length){e.reloadtime&&clearTimeout(e.reloadtime);var n=new LEvent(LEvent.COMPLETE);n.currentTarget=e,n.target=e.result,e.dispatchEvent(n),LGlobal.forceRefresh=!0}}},url:function(t){return LGlobal.traceDebug?t+(0<=t.indexOf("?")?"&":"?")+"t="+(new Date).getTime():t}};for(var e in t)o.prototype[e]=t[e];return o.load=function(t,e,n,a){var i=new o;e&&i.addEventListener(LEvent.PROGRESS,function(t){e((100*t.loaded/t.total).toFixed(2))}),n&&i.addEventListener(LEvent.COMPLETE,function(t){n(t.target)}),a&&i.addEventListener(LEvent.ERROR,a),i.load(t)},o}(),LEasing={None:{easeIn:function(t,e,n,a){return e+t*n/a},easeOut:function(t,e,n,a){return e+t*n/a},easeInOut:function(t,e,n,a){return e+t*n/a}},Quad:{easeIn:function(t,e,n,a){return n*(t/=a)*t+e},easeOut:function(t,e,n,a){return-n*(t/=a)*(t-2)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t+e},easeOut:function(t,e,n,a){return n*((t=t/a-1)*t*t+1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t*t+e},easeOut:function(t,e,n,a){return-n*((t=t/a-1)*t*t*t-1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t*t*t+e},easeOut:function(t,e,n,a){return n*((t=t/a-1)*t*t*t*t+1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+e},easeOut:function(t,e,n,a){return n*Math.sin(t/a*(Math.PI/2))+e},easeInOut:function(t,e,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+e}},Strong:{easeIn:function(t,e,n,a){return n*(t/=a)*t*t*t*t+e},easeOut:function(t,e,n,a){return n*((t=t/a-1)*t*t*t*t+1)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Expo:{easeIn:function(t,e,n,a){return 0==t?e:n*Math.pow(2,10*(t/a-1))+e},easeOut:function(t,e,n,a){return t==a?e+n:n*(1-Math.pow(2,-10*t/a))+e},easeInOut:function(t,e,n,a){return 0==t?e:t==a?e+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e}},Circ:{easeIn:function(t,e,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOut:function(t,e,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOut:function(t,e,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,n,a,i,o){var r;return 0==t?e:1==(t/=a)?e+n:(o=o||.3*a,r=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*--t)*Math.sin((t*a-r)*(2*Math.PI)/o)+e)},easeOut:function(t,e,n,a,i,o){var r;return 0==t?e:1==(t/=a)?e+n:(o=o||.3*a,r=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*a-r)*(2*Math.PI)/o)+n+e)},easeInOut:function(t,e,n,a,i,o){var r;return 0==t?e:2==(t/=a/2)?e+n:(o=o||a*(.3*1.5),r=!i||i<Math.abs(n)?(i=n,o/4):o/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*--t)*Math.sin((t*a-r)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*--t)*Math.sin((t*a-r)*(2*Math.PI)/o)*.5+n+e)}},Back:{easeIn:function(t,e,n,a,i){return typeof i==UNDEFINED&&(i=1.70158),n*(t/=a)*t*((i+1)*t-i)+e},easeOut:function(t,e,n,a,i){return typeof i==UNDEFINED&&(i=1.70158),n*((t=t/a-1)*t*((i+1)*t+i)+1)+e},easeInOut:function(t,e,n,a,i){return typeof i==UNDEFINED&&(i=1.70158),(t/=a/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e}},Bounce:{easeIn:function(t,e,n,a){return n-LEasing.Bounce.easeOut(a-t,0,n,a)+e},easeOut:function(t,e,n,a){return(t/=a)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,n,a){return t<a/2?.5*LEasing.Bounce.easeIn(2*t,0,n,a)+e:.5*LEasing.Bounce.easeOut(2*t-a,0,n,a)+.5*n+e}}},Quad=LEasing.Quad,Cubic=LEasing.Cubic,Quart=LEasing.Quart,Quint=LEasing.Quint,Sine=LEasing.Sine,Strong=LEasing.Strong,Expo=LEasing.Expo,Circ=LEasing.Circ,Elastic=LEasing.Elastic,Back=LEasing.Back,Bounce=LEasing.Bounce,LTweenLite=function(){function i(t,e,n){LExtends(this,LObject,[]),this.type="LTweenLiteChild",this.toNew=[],this.init(t,e,n)}var t={init:function(t,e,n){var a=this,i=null;for(i in typeof n.tweenTimeline==UNDEFINED&&(n.tweenTimeline=c.TYPE_FRAME),a.target=t,a.target.objectIndex||(a.target.objectIndex=++LGlobal.objectIndex),a.duration=e||.001,a.vars=n,a.delay=a.vars.delay||0,a.vars.tweenTimeline==c.TYPE_TIMER?(a.currentTime=(new Date).getTime()/1e3,a.initTime=a.currentTime,a.startTime=a.initTime+a.delay):(a.currentTime=0,a.duration*=1e3,a.currentTime-=1e3*a.delay),a.combinedTimeScale=a.vars.timeScale||1,a.active=0==a.duration&&0==a.delay,a.varsto={},a.varsfrom={},a.varsDiff={},a.varsListIndex={},a.varsListCurr={},a.varsListTo={},a.varsListLength={},a.stop=!1,"function"!=typeof a.vars.ease&&(a.vars.ease=LEasing.None.easeIn),a.ease=a.vars.ease,delete a.vars.ease,"function"==typeof a.vars.onComplete?(a.onComplete=a.vars.onComplete,delete a.vars.onComplete):a.onComplete=null,"function"==typeof a.vars.onUpdate?(a.onUpdate=a.vars.onUpdate,delete a.vars.onUpdate):a.onUpdate=null,"function"==typeof a.vars.onStart?(a.onStart=a.vars.onStart,delete a.vars.onStart):a.onStart=null,a.vars)if("coordinate"==i&&Array.isArray(a.vars[i])){for(var o=0,r={x:a.target.x,y:a.target.y},s=0,l=a.vars[i].length;s<l;s++){var u=a.vars[i][s];o+=LPoint.distance(u,r),r=u}a.varsListIndex[i]=0,a.varsListCurr[i]=0,a.varsListTo[i]=o,a.varsto[i]=a.vars[i],a.varsfrom[i]={x:a.target.x,y:a.target.y}}else"number"==typeof a.vars[i]&&(a.varsto[i]=a.vars[i],a.varsfrom[i]=a.target[i],a.varsDiff[i]=a.vars[i]-a.target[i])},pause:function(){this.stop=!0},resume:function(){this.stop=!1},tween:function(){var t,e=this,n=e.vars.tweenTimeline==c.TYPE_TIMER;if(n){var a=(new Date).getTime()/1e3-e.startTime;if(a<0)return}else{if(e.stop)return;if(e.currentTime+=LGlobal.speed,e.currentTime<0)return}for(u in e.varsto)if(typeof e.varsListTo[u]==UNDEFINED)e.target[u]=e.ease(n?a:e.currentTime,e.varsfrom[u],e.varsDiff[u],e.duration);else{var i=e.ease(n?a:e.currentTime,0,e.varsListTo[u],e.duration);i>e.varsListTo[u]&&(i=e.varsListTo[u]);for(var o=0<e.varsListIndex[u]?e.vars[u][e.varsListIndex[u]-1]:e.varsfrom[u],r=e.vars[u][e.varsListIndex[u]],s=LPoint.distance(o,r);e.varsListCurr[u]+s<i;)e.varsListCurr[u]+=s,o=r,e.varsListIndex[u]++,r=e.vars[u][e.varsListIndex[u]],s=LPoint.distance(o,r);e.target.x=o.x,e.target.y=o.y,0!=s&&r.x-o.x!=0&&(e.target.x+=(r.x-o.x)*(i-e.varsListCurr[u])/s),0!=s&&r.y-o.y!=0&&(e.target.y+=(r.y-o.y)*(i-e.varsListCurr[u])/s)}if(e.onStart&&(e._dispatchEvent(e.onStart),delete e.onStart),n?a>=e.duration:e.currentTime>=e.duration){for(t in e.varsto)if(typeof e.varsListTo[t]==UNDEFINED)e.target[t]=e.varsto[t];else{var l=e.varsto[t][e.vars[t].length-1];e.target.x=l.x,e.target.y=l.y}return e.onComplete&&e._dispatchEvent(e.onComplete,!0),!0}return e.onUpdate&&e._dispatchEvent(e.onUpdate),!1},_dispatchEvent:function(t,e){function n(){(i.target=i).currentTarget=a,t(i),delete i.currentTarget,delete i.target}var a=this,i=a.target;e?setTimeout(function(){n()},1):n()},to:function(t,e,n,a){return this.toNew.push({target:t,duration:e,vars:n,data:a}),this},keep:function(){var t,e,n,a,i=this;if(0<i.toNew.length){if((t=i.toNew.shift()).vars.loop&&(i.loop=!0),i.loop){for(n in a={},e={},t.vars)e[n]=t.vars[n],typeof t.target[n]!=UNDEFINED&&t.vars.playStyle==c.PlayStyle.Init&&(t.data?t.target[n]=t.data[n]:a[n]=t.target[n]);t.data||(t.data=a),i.to(t.target,t.duration,e,t.data)}return i.init(t.target,t.duration,t.vars),!0}return!1}};for(var u in t)i.prototype[u]=t[u];function c(){LExtends(this,LObject,[]),this.type="LTweenLite",this.tweens=[]}c.PlayStyle={None:"none",Init:"init"},c.TYPE_FRAME="type_frame",c.TYPE_TIMER="type_timer";t={count:function(){return this.tweens.length},ll_show:function(){var t,e;for(t=this.tweens.length-1;0<=t;t--)(e=this.tweens[t])&&e.tween&&e.tween()&&(this.tweens.splice(t,1),e.keep()&&this.add(e))},to:function(t,e,n){if(t){var a=new i({},0,{});return this.tweens.push(a),a.to(t,e,n),a}},add:function(t){this.tweens.push(t)},remove:function(t){if(typeof t!=UNDEFINED)for(var e=0,n=this.tweens.length;e<n;e++)if(t.objectIndex==this.tweens[e].objectIndex){this.tweens.splice(e,1);break}},removeTarget:function(t){for(var e=0,n=this.tweens.length;e<n;e++)if(t.objectIndex==this.tweens[e].target.objectIndex){this.tweens.splice(e,1);break}},removeAll:function(){this.tweens.splice(0,this.tweens.length)},pauseAll:function(){for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].pause()},resumeAll:function(){for(var t=0,e=this.tweens.length;t<e;t++)this.tweens[t].resume()}};for(var u in t)c.prototype[u]=t[u];LTweenLiteTimeline=new c,LGlobal.childList.push(LTweenLiteTimeline);var e=new c;return e.TYPE_FRAME=c.TYPE_FRAME,e.TYPE_TIMER=c.TYPE_TIMER,e.PlayStyle=c.PlayStyle,LGlobal.childList.push(e),e}(),WxLocalRequest=function(){function t(){this.responseType="text"}var e={setRequestHeader:function(t,e){},_onreadystatechange:function(t){if(this.onreadystatechange){var e={currentTarget:{readyState:4,status:200,responseType:this.responseType,_responseType:this._responseType,responseText:t.data,response:t.data}};this.onreadystatechange(e)}},_onerror:function(t){this.onerror&&this.onerror(t)},open:function(t,e,n,a,i){this.url=e},send:function(t){var e=this,n={filePath:this.url,success:function(t){e._onreadystatechange(t)},fail:function(t){e._onerror(t)}};"text"===this.responseType&&(n.encoding="utf8"),wx.getFileSystemManager().readFile(n)}};for(var n in e)t.prototype[n]=e[n];return t}(),LAjax=function(){function t(){this.responseType=null,window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,this.canUseBlob=window.Blob||window.BlobBuilder;var t=location.protocol;this.local=!("http:"==t||"https:"==t)}return t.prototype={TEXT:"text",JSON:"json",ARRAY_BUFFER:"arraybuffer",BLOB:"blob",get:function(t,e,n,a){this.getRequest("GET",t,e,n,a)},post:function(t,e,n,a){this.getRequest("POST",t,e,n,a)},getRequest:function(t,e,n,a,i){var o,r=this,s="",l="";r.err=i;var u=e.indexOf("http")<0,c=r.getHttp(u);if(c){if(n)for(o in n)s+=l+o+"="+n[o],l="&";"get"==t.toLowerCase()&&0<s.length&&(e+=(0<=e.indexOf("?")?"&":"?")+s,s=null),c.onerror=function(t){i&&(i(t),i=null)};var h=r.progress;if(r.progress=null,c.addEventListener||(c.addEventListener=function(t,e){c["on"+t]=e}),c.addEventListener("progress",function(t){404==t.currentTarget.status?i&&(i(t.currentTarget),i=null):200==t.currentTarget.status&&h&&h(t)},!1),c.open(t,e,!0),r.responseType){if(r.responseType==r.JSON)try{c.responseType=r.responseType}catch(t){c.responseType=r.TEXT,c._responseType="json"}else c.responseType=r.responseType;r.responseType=r.TEXT}c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onreadystatechange=function(t){var e=t.currentTarget;4==e.readyState&&(200<=e.status&&e.status<300||304===e.status?a&&(e._responseType==r.JSON?(e._responseType=r.TEXT,a(JSON.parse(e.responseText))):e.responseType==r.ARRAY_BUFFER||e.responseType==r.BLOB||e.responseType==r.JSON?a(e.response):0<e.responseText.length?a(e.responseText):a(null)):i&&(i(e),i=null))},c.send(s)}},getHttp:function(t){if(LGlobal.wx&&t)return new WxLocalRequest;if(typeof XMLHttpRequest!=UNDEFINED)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){this.err||this.err(t)}}return!1}},new t}(),LStageWebView=function(){function e(){var t=this;LExtends(t,LEventDispatcher,[]),t.display=document.createElement("div"),t.iframe=document.createElement("iframe"),t.display.style.position="absolute",t.display.style.marginTop="0px",t.display.style.marginLeft="0px",t.display.style.zIndex=e.START_INDEX++,LGlobal.ios&&(t.display.style.overflow="auto",t.display.style.webkitOverflowScrolling="touch"),t.display.appendChild(t.iframe),t.idAdded=!1}e.START_INDEX=11;var t={loadURL:function(t){var e=this;e.iframe.src=t,e.iframe.onload=function(){e.dispatchEvent(LEvent.COMPLETE)}},show:function(){var t=this;t.idAdded||(LGlobal.object.appendChild(t.display),t.idAdded=!0),"none"==t.display.style.display&&(t.display.style.display="")},die:function(){LGlobal.object.removeChild(this.display),this.idAdded=!1},hide:function(){this.display.style.display="none"},setViewPort:function(t){var e=this,n=parseInt(LGlobal.canvasObj.style.width)/LGlobal.canvasObj.width,a=parseInt(LGlobal.canvasObj.style.height)/LGlobal.canvasObj.height;e.display.style.marginTop=parseInt(LGlobal.canvasObj.style.marginTop)+(t.y*a>>>0)+"px",e.display.style.marginLeft=parseInt(LGlobal.canvasObj.style.marginLeft)+(t.x*n>>>0)+"px",e.iframe.style.width=e.display.style.width=(t.width*n>>>0)+"px",e.iframe.style.height=e.display.style.height=(t.height*a>>>0)+"px"}};for(var n in t)e.prototype[n]=t[n];return e}(),FPS=function(){function t(){var t=this;LExtends(t,LSprite,[]),LGlobal.fpsStatus||(LGlobal.fpsStatus={a:0,b:0,c:0,d:0,e:0,bitmapData:0,display:0,transform:0,graphics:0,text:0,reset:function(){this.a=this.bitmapData,this.b=this.display-1,this.c=this.transform-1,this.d=this.graphics-1,this.e=this.text-5,this.bitmapData=0,this.display=0,this.transform=0,this.graphics=0,this.text=0}}),t.fps=[],t.back=new LShape,t.back.alpha=.5,t.addChild(t.back);for(var e=0;e<5;e++){var n=new LTextField;n.color="#ffffff",n.y=20*e,t.addChild(n),t.fps.push(n)}t.fpsCount=0,t.fpsTime=(new Date).getTime(),t.addEventListener(LEvent.ENTER_FRAME,t.showFPS)}return t.prototype.showFPS=function(t){var e,n,a=t.currentTarget;a.fpsCount++,(e=(new Date).getTime())-a.fpsTime<1e3||(a.fps[0].text="FPS : "+Math.round(1e4*a.fpsCount/(e-a.fpsTime))/10,n=LGlobal.fpsStatus,a.fps[1].text="DisplayObject : "+n.c+"/"+n.b,a.fps[2].text="Draw image : "+n.a,a.fps[3].text="Draw graphics : "+n.d,a.fps[4].text="Draw text : "+n.e,a.fpsTime=e,a.fpsCount=0,a.back.graphics.clear(),a.back.graphics.drawRect(0,"#000000",[0,0,a.fps[1].getWidth(),100],!0,"#000000"))},t.prototype.die=function(){LGlobal.fpsStatus=null,this.callParent("die",arguments)},t}();